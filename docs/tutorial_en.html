<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<title>STJson</title>
<link rel="stylesheet" type="text/css" href="./css/stdoc.css"/>
<script type="text/javascript" src="./js/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="./js/stdoc.js"></script>
</head>
<body>
<div id="div_model" style="display:none">SINGLE</div>
<div id="div_body">
<div id="div_logo"></div>
<div id="div_left">
<div id="div_left_list">
<ul class='ul_group_root'>
<li>
    <a class='a_node_root anchor_btn' name='a_a' href='#a_a'>STLib.Json</a>
    <ul>
        <li class='li_node_sub'><a class='anchor_btn' name='a_b' href='#a_b'>Introduction</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_c' href='#a_c'>The question of Path</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_d' href='#a_d'>The question of expression</a></li>
    </ul>
</li>
<li>
    <a class='a_node_root anchor_btn' name='a_e' href='#a_e'>STJson API</a>
    <ul>
        <li class='li_node_sub'><a class='anchor_btn' name='a_f' href='#a_f'>Data type</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_g' href='#a_g'>Static methods</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_h' href='#a_h'>Non-Static methods</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_i' href='#a_i'>Extensions methods</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_j' href='#a_j'>Fields</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_k' href='#a_k'>Indexer</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_l' href='#a_l'>Other object</a></li>
    </ul>
</li>
<li>
    <a class='a_node_root anchor_btn' name='a_m' href='#a_m'>STJson [Basic]</a>
    <ul>
        <li class='li_node_sub'><a class='anchor_btn' name='a_n' href='#a_n'>object -&gt; string</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_o' href='#a_o'>string -&gt; object</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_p' href='#a_p'>STJson -&gt; object</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_q' href='#a_q'>STJsonConverter</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_r' href='#a_r'>STJsonAttribute</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_s' href='#a_s'>STJsonSetting</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_t' href='#a_t'>JSON5</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_u' href='#a_u'>STJsonReader</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_v' href='#a_v'>STJsonWriter</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_w' href='#a_w'>json_src [Important]</a></li>
    </ul>
</li>
<li>
    <a class='a_node_root anchor_btn' name='a_x' href='#a_x'>STJsonPath</a>
    <ul>
        <li class='li_node_sub'><a class='anchor_btn' name='a_y' href='#a_y'>Selector</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='a_z' href='#a_z'>How to use</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_a' href='#b_a'>Wildcard character</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_b' href='#b_b'>Depth selector</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_c' href='#b_c'>List selector</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_d' href='#b_d'>Slice selector</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_e' href='#b_e'>Expression</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_f' href='#b_f'>Filter expression</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_g' href='#b_g'>General expression</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_h' href='#b_h'>Test expression</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_i' href='#b_i'>Build-In functions</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_j' href='#b_j'>Build-In functions list</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_k' href='#b_k'>Custom functions</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_l' href='#b_l'>Selectors in expressions</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_m' href='#b_m'>Select mode</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_n' href='#b_n'>ParsedTokens</a></li>
    </ul>
</li>
<li>
    <a class='a_node_root anchor_btn' name='b_o' href='#b_o'>STJson [Advanced]</a>
    <ul>
        <li class='li_node_sub'><a class='anchor_btn' name='b_p' href='#b_p'>Get value</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_q' href='#b_q'>Set value</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_r' href='#b_r'>STJsonCreator</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_s' href='#b_s'>Callback</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_t' href='#b_t'>PathItem</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_u' href='#b_u'>Clone</a></li>
    </ul>
</li>
<li>
    <a class='a_node_root anchor_btn' name='b_v' href='#b_v'>Aggregation</a>
    <ul>
        <li class='li_node_sub'><a class='anchor_btn' name='b_w' href='#b_w'>sort</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_x' href='#b_x'>group</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_y' href='#b_y'>terms</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='b_z' href='#b_z'>min, max</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='c_a' href='#c_a'>avg, sum</a></li>
        <li class='li_node_sub'><a class='anchor_btn' name='c_b' href='#c_b'>STJsonPath.Name</a></li>
    </ul>
</li>
<li>
    <a class='a_node_root anchor_btn' name='c_c' href='#c_c'>The END</a>
    <ul>
        
    </ul>
</li>
</ul><div class='div_left_space_space'></div>
</div>
<span id="span_time">2024-08-02 -> by:<span>DebugST</span></span>
</div>
<div id="div_right">
<h1 class='h_title anchor_point' name='a_a'>STLib.Json</h1>
<div><h2 class='h_option anchor_point' name='a_b'>Introduction</h2></div>
<p><span class='mark'>STLib.Json</span> is a <span class='mark'>Json</span> parsing library based on the <span class='mark'>MIT</span> open source protocol . Developed by <a class='mark' target='_blank' href='https://github.com/DebugST'>DebugST</a>, the library is implemented natively without any library dependencies , so it is very lightweight , convenient and powerful . Because there is no use of any dependencies built natively, it can be easily ported to other programming languages. Of course, due to the author is very lazy, this probability is not very big, just dream about it, do not take it too seriously.</p>
<p>So why develop <span class='mark'>STJson</span>? As we all know, <span class='mark'>.NET</span> comes with a parsing library that is too user-friendly, and I'm sure you're not used to using it. And it just so happens that the author always needs to use <span class='mark'>JSON</span> data processing at the moment. Although there are some third-party libraries that can be used, after the author's experience, he thought, forget about doing it himself. There are two main points.</p>
<ul>
<li><span class='mark'>JSON5</span> support is not friendly enough</li>
<li><span class='mark'>JsonPath</span> support is not friendly enough.</li>
</ul>
<p>In the design of <span class='mark'>STJson</span> the author does not have any objection, after all, <span class='mark'>Json</span> data format does not exist controversial place, of course, in the compatibility of <span class='mark'>JSON5</span> the author still add part of their own ideas, anyway, the current <a class='mark' target='_blank' href='https://json5.org/'>JSON5</a> is not the official document.</p>
<p>When designing <span class='mark'>STJsonPath</span>, the authors hesitated because they found a lot of controversy and were unable to find an official <span class='mark'>RFC</span> document for <span class='mark'>JsonPath</span>, only a draft:</p>
<p><a class='mark' target='_blank' href='https://www.ietf.org/archive/id/draft-ietf-jsonpath-base-03.html'>JSONPath: Query expressions for JSON</a></p>
<p>Although some of the doubts in the draft can also be solved, the author still has some doubts, after all, it is not an official document. Before development the author was also curious about other <span class='mark'>JsonPath</span> open source libraries and how other libraries solved the controversial areas. Unfortunately, the problem persists. No library seems to be willing to be compatible with this draft. Since there is no official <span class='mark'>RFC</span> documentation for <span class='mark'>JsonPath</span>, the authors will try to be as compatible as possible with the draft while adding some of their own ideas.</p>
<div><h2 class='h_option anchor_point' name='a_c'>The question of Path</h2></div>
<p><span class='mark'>JsonPath</span> is derived from the use of <span class='mark'>XPath</span>, which is known as the <span class='mark'>XML</span> Path Language, a language used to determine the location of a part of an <span class='mark'>XML</span> document. Obviously <span class='mark'>JsonPath</span> is used for <span class='mark'>Json</span>. Both of them are used in almost the same way, but the differences in the <span class='mark'>XML</span> and <span class='mark'>Json</span> data formats are bound to have differences.</p>
<p>For example, there are no special characters in the element name of <span class='mark'>XML</span>, but the <span class='mark'>Key</span> of <span class='mark'>Json</span> can be any string, if there is a bit of <span class='mark'>Json</span> data:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span>{ <span style='color:rgba(255,165,0,1)'>"aa"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span> <span style='color:rgba(255,165,0,1)'>"bb"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"cc"</span> <span style='color:rgba(255,255,255,1)'>} }</span></pre>
</div>
<p>In <span class='mark'>JsonPath</span> we can get the value <span class='mark'>cc</span> by the path <span class='mark'>aa.bb</span> and there is no problem, what if the <span class='mark'>Json</span> data is replaced with the following:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span>{ <span style='color:rgba(255,165,0,1)'>"a.a"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span> <span style='color:rgba(255,165,0,1)'>"bb"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"cc"</span> <span style='color:rgba(255,255,255,1)'>} }</span></pre>
</div>
<p>Obviously the value <span class='mark'>cc</span> is not available through <span class='mark'>a.a.bb</span>. Perhaps normally <span class='mark'>Json</span> represents some object, and objects don't have such strange properties. But for the <span class='mark'>Json</span> data format, its <span class='mark'>Key</span> can be any character. Even if you pass <span class='mark'>{OBJ_NAME}.a.a.bb</span> in the browser, you'll just get an error. But browsers don't access <span class='mark'>Json</span> elements only by <span class='mark'>. </span>, but also the indexer <span class='mark'>{OBJ_NAME}['a.a']['bb']</span> to get the correct value.</p>
<p>The use of <span class='mark'>'</span> or <span class='mark'>"</span> is allowed in <span class='mark'>STJsonPath</span>, which will be marked as <span class='mark'>String</span> in the lexical parser (STJsonPathTokenizer.cs), and if this string is in the scope of a non-expression, the parser (STJsonPathParser.cs) will re-tag it as <span class='mark'>Property </span> to be used as an index, thus avoiding cases where special strings can't be handled, and strings support <span class='mark'>\</span> for escaping. So you can use <span class='mark'>'a.a'.bb</span> in <span class='mark'>STJsonPath</span> to get the correct value. And similar handling is indeed mentioned in the draft.</p>
<div><h2 class='h_option anchor_point' name='a_d'>The question of expression</h2></div>
<p>In the draft there is a reference to support for expressions and that there are two types of expressions, <span class='mark'>()</span> and <span class='mark'>? ()</span>. These represent <span class='mark'>regular expressions</span> and <span class='mark'>filter expressions</span> respectively. According to the author's understanding, <span class='mark'>regular expression</span> is used to calculate a value and use this value as part of <span class='mark'>JsonPath</span>, such as <span class='mark'>$.books[(@.length - 1)]</span> in many cases. When executing <span class='mark'>JsonPath</span> it is possible to perform a cascading recursion on the <span class='mark'>Json</span> elements, where <span class='mark'>@</span> is a dynamic variable indicating the <span class='mark'>Json</span> element currently being processed during the recursion, and according to the expression's apparent meaning it is trying to get the penultimate element in <span class='mark'>books</span>.</p>
<p>But how does <span class='mark'>@.length</span> get executed? Where does <span class='mark'>length</span> come from? If <span class='mark'>@</span> is an array, the author can tentatively understand that he is asking for the length of the array? But what if <span class='mark'>@</span> is an object?</p>
<p>Since it is an expression, what kind of syntax can be written in <span class='mark'>()</span>? What about the grammar? Regarding all these queries the author has used his own implementation, which will be presented in a later tutorial.</p>
<h1 class='h_title anchor_point' name='a_e'>STJson API</h1>
<div><h2 class='h_option anchor_point' name='a_f'>Data type</h2></div>
<div class='div_table'>
<table>
<tr><th>.Net</th><th>STJsonValueType</th><th>.Net</th><th>STJsonValueType</th></tr>
<tr><td>byte</td><td>Long</td><td>sbyte</td><td>Long</td></tr>
<tr class='tr_hight'><td>short</td><td>Long</td><td>ushort</td><td>Long</td></tr>
<tr><td>int</td><td>Long</td><td>uint</td><td>Long</td></tr>
<tr class='tr_hight'><td>long</td><td>Long</td><td>ulong</td><td>Long</td></tr>
<tr><td>float</td><td>Double</td><td>double</td><td>Double</td></tr>
<tr class='tr_hight'><td>decimal</td><td>Double</td><td>bool</td><td>Boolean</td></tr>
<tr><td>char</td><td>String</td><td>string</td><td>String</td></tr>
<tr class='tr_hight'><td>DateTime</td><td>String</td><td>enum</td><td>Long or String</td></tr>
<tr><td>Point</td><td>Array</td><td>PointF</td><td>Array</td></tr>
<tr class='tr_hight'><td>Size</td><td>Array</td><td>SizeF</td><td>Array</td></tr>
<tr><td>Rectangle</td><td>Array</td><td>RectangleF</td><td>Array</td></tr>
<tr class='tr_hight'><td>Color</td><td>Array</td><td>DataTable</td><td>Object</td></tr>
<tr><td>Array</td><td>Array</td><td>ICollection</td><td>Array</td></tr>
<tr class='tr_hight'><td>IDectionary</td><td>Object</td><td>object</td><td>Object</td></tr>
</table>
</div>
<p><span class='mark'>STJson</span> covers common basic data types, and even if they are not included, then the properties of the object will eventually be recursed by performing reflection.</p>
<div><h2 class='h_option anchor_point' name='a_g'>Static methods</h2></div>
<div class='div_hightlight' style='background-color:goldenrod;color:black'>
<p>In the following, <span class='mark'>(+n)</span> means that there is more than one overloading.</p>
</div>
<div class='div_table'>
<table>
<tr><th>return</th><th>signature</th><th>note</th></tr>
<tr><td>string</td><td>Serialize(+n)</td><td>Serializes an <span class='mark'>object</span> object to a string.</td></tr>
<tr class='tr_hight'><td>STJson</td><td>Deserialize(string)</td><td>Convert a string to an <span class='mark'>STJson</span> object.</td></tr>
<tr><td>T</td><td>Deserialize&lt;T&gt;(+n)</td><td>Converts an object or string to a target object.</td></tr>
<tr class='tr_hight'><td>STJsonWriter</td><td>Write</td><td>Create an <span class='mark'>STJsonWriter</span> object.</td></tr>
<tr><td>STJsonReader</td><td>Read</td><td>Create an <span class='mark'>STJsonReader</span> object.</td></tr>
<tr class='tr_hight'><td>STJson</td><td>Create(STJsonCreator)</td><td>Create an <span class='mark'>STJson</span> object.</td></tr>
<tr><td>STJson</td><td>CreateObject()</td><td>Creates an <span class='mark'>Null</span> object.</td></tr>
<tr class='tr_hight'><td>STJson</td><td>CreateArray(params object[])</td><td>Creates an <span class='mark'>array</span> object.。</td></tr>
<tr><td>STJson</td><td>FromObject(+n)</td><td>Convert an object to <span class='mark'>STJson</span>.</td></tr>
<tr class='tr_hight'><td>string</td><td>Format(+n)</td><td>Formats a <span class='mark'>Json</span> string.</td></tr>
<tr><td>void</td><td>AddCustomConverter(+n)</td><td>Custom type converters.</td></tr>
<tr class='tr_hight'><td>void</td><td>RemoveCustomConverter(+n)</td><td>Remove the custom converter.</td></tr>
</table>
</div>
<div><h2 class='h_option anchor_point' name='a_h'>Non-Static methods</h2></div>
<div class='div_table'>
<table>
<tr><th>return</th><th>signature</th><th>note</th></tr>
<tr><td>STJson</td><td>SetItem(+n)</td><td>Add a key-value pair to the object and returns itself.</td></tr>
<tr class='tr_hight'><td>STJson</td><td>SetKey(string)</td><td>Add a <span class='mark'>key</span> to the object and returns the target object.</td></tr>
<tr><td>void</td><td>GetValue(+n)</td><td>Get the value of the target object.</td></tr>
<tr class='tr_hight'><td>void</td><td>SetValue(+n)</td><td>Set the value of the target object.</td></tr>
<tr><td>STJson</td><td>Remove(string)</td><td>Remove a <span class='mark'>key</span> from an object and returns the target object.</td></tr>
<tr class='tr_hight'><td>STJson</td><td>Append(+n)</td><td>Add an element or elements to an array object and returns itself.</td></tr>
<tr><td>STJson</td><td>Insert(+n)</td><td>Insert an element or elements to an array object and returns itself.</td></tr>
<tr class='tr_hight'><td>STJson</td><td>RemoveAt(int nIndex)</td><td>Remove an index from an array object.</td></tr>
<tr><td>void</td><td>Clear()</td><td>Clear all elements.</td></tr>
<tr class='tr_hight'><td>IEnumerator&lt;STJson&gt;</td><td>GetEnumerator()</td><td>Get all elements.</td></tr>
<tr><td>STJson</td><td>Clone</td><td>Clone current <span class='mark'>STJson</span>。</td></tr>
</table>
</div>
<div><h2 class='h_option anchor_point' name='a_i'>Extensions methods</h2></div>
<div class='div_table'>
<table>
<tr><th>return</th><th>signature</th><th>note</th></tr>
<tr><td>bool</td><td>IsNullOrNullValue</td><td>Check current <span class='mark'>STJson</span> is <span class='mark'>null</span> or the <span class='mark'>Undefined</span>.</td></tr>
<tr class='tr_hight'><td>STJson</td><td>Set(+n)</td><td>Set the object according to the path (STJsonPath).</td></tr>
<tr><td>string</td><td>GetValue(+n)</td><td>Get the string value of the object (value type only).</td></tr>
<tr class='tr_hight'><td>T</td><td>GetValue&lt;T&gt;(+n)</td><td>Get value from value(value type only).</td></tr>
<tr><td>STJson</td><td>Select(+n)</td><td>Filter the data in the object.</td></tr>
<tr class='tr_hight'><td>STJson</td><td>SelectFirst(+n)</td><td>Filter the data in the object and check the first result.</td></tr>
<tr><td>STJson</td><td>SelectLast(+n)</td><td>Filter the data in the object and check the last result.</td></tr>
<tr class='tr_hight'><td>STJson</td><td>Group(+n)</td><td>Groups the specified fields.</td></tr>
<tr><td>STJson</td><td>Terms(+n)</td><td>Counts the number of values in the specified field.</td></tr>
<tr class='tr_hight'><td>STJson</td><td>Sort(+n)</td><td>Sort the array.</td></tr>
<tr><td>STJson</td><td>Min(+n)</td><td>Get the minimum value from the array.</td></tr>
<tr class='tr_hight'><td>STJson</td><td>Max(+n)</td><td>Get the maximum value from the array.</td></tr>
<tr><td>STJson</td><td>Sum(+n)</td><td>Get the summary from the array.</td></tr>
<tr class='tr_hight'><td>STJson</td><td>Avg(+n)</td><td>Get the average value from the array.</td></tr>
</table>
</div>
<div><h2 class='h_option anchor_point' name='a_j'>Fields</h2></div>
<div class='div_table'>
<table>
<tr><th>type</th><th>name</th><th>note</th></tr>
<tr><td>string</td><td>Key</td><td>The <span class='mark'>Key</span> of the current <span class='mark'>STJson</span> parent element.</td></tr>
<tr class='tr_hight'><td>object</td><td>Value</td><td>The value of the current <span class='mark'>STJson</span>, or <span class='mark'>null</span> if the current <span class='mark'>STJson</span> is not a value type.</td></tr>
<tr><td>bool</td><td>IsNullValue</td><td>Whether the current <span class='mark'>STJson</span> is an empty element, i.e. it is not possible to determine the data type of the current <span class='mark'>STJson</span> value.</td></tr>
<tr class='tr_hight'><td>int</td><td>Count</td><td>The number of child elements contained in the current <span class='mark'>STJson</span>.</td></tr>
<tr><td>STJsonValueType</td><td>ValueType</td><td>(Enumeration) The data type of the current element.</td></tr>
</table>
</div>
<p><span class='mark'>STJsonValueType</span> is the following value:</p>
<p><span class='mark'>Undefined</span> <span class='mark'>String</span> <span class='mark'>Boolean</span> <span class='mark'>Long</span> <span class='mark'>Double</span> <span class='mark'>Datetime</span> <span class='mark'>Array</span> <span class='mark'>Object</span></p>
<div><h2 class='h_option anchor_point' name='a_k'>Indexer</h2></div>
<ul>
<li>STJson STJson[int]</li>
<li>STJson STJson[string]</li>
</ul>
<div><h2 class='h_option anchor_point' name='a_l'>Other object</h2></div>
<div class='div_table'>
<table>
<tr><th>name</th><th>note</th></tr>
<tr><td>STJsonCreator</td><td>Used to create a complex <span class='mark'>STJson</span> object.</td></tr>
<tr class='tr_hight'><td>STJsonReader</td><td>Used to dynamically parse objects from a <span class='mark'>TextReader</span>. Typically used to read a <span class='mark'>Json</span> with larger data from a file.</td></tr>
<tr><td>STJsonWriter</td><td>Used to write a <span class='mark'>Json</span> string to a <span class='mark'>TextWriter</span>. Typically used to write a large and complex <span class='mark'>Json</span> data directly to a file.</td></tr>
</table>
</div>
<h1 class='h_title anchor_point' name='a_m'>STJson [Basic]</h1>
<p><span class='mark'>STJson</span> is an intermediate data type that bridges between <span class='mark'>string</span> and <span class='mark'>object</span> and is very convenient to use, for example:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> st_json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>()</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"number"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>)</span>               <span style='color:rgba(0,255,0,1)'>// The function returns itself, so it can operate continuously.</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"boolean"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"string"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"this is string"</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"datetime"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(0,255,255,1)'>DateTime</span><span style='color:rgba(112,128,144,1)'>.Now</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"array_1"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.CreateArray</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"string"</span><span style='color:rgba(255,255,255,1)'>))</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"array_2"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.FromObject</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(100,149,237,1)'>object</span><span style='color:rgba(255,255,255,1)'>[] {</span> <span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"string"</span> <span style='color:rgba(255,255,255,1)'>}))</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"object"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(255,255,255,1)'>{</span> key <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>"this is a object"</span> <span style='color:rgba(255,255,255,1)'>})</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"null"</span><span style='color:rgba(255,255,255,1)'>,</span> obj<span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>st_json<span style='color:rgba(219,112,147,1)'>.SetKey</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"key"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.SetValue</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"this is a test"</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>st_json<span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span> <span style='color:rgba(0,255,0,1)'>// 4 -> indentation space count
<span class='span_code_line'></span>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"number"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"boolean"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"string"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"this is string"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"datetime"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"2023-04-22T21:12:30.6109410+08:00"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"array_1"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"string"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"array_2"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"string"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"object"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"key"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"this is a object"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>},</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"null"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"key"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"this is a test"</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>}</span></pre>
</div>
<div class='div_hightlight' style='background-color:pink;color:black'>
<p>When executing <span class='mark'>var st_json = new STJson()</span>, <span class='mark'>st_json</span> is the empty element, i.e. <span class='mark'>st_json.IsNullValue = true</span>. Because at this point it is not possible to determine whether <span class='mark'>st_json</span> is an <span class='mark'>object</span> or an <span class='mark'>array</span> or a <span class='mark'>value</span>.</p>
<p>There is no object like <span class='mark'>JArray</span> or <span class='mark'>JObject</span> in <span class='mark'>STJson</span>, <span class='mark'>STJson</span> can be either <span class='mark'>Array</span> or <span class='mark'>Object</span>. <span class='mark'>STJson</span> has two indexers <span class='mark'>[int]</span> <span class='mark'>[string]</span>.</p>
</div>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_1 <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>();</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"[json_1] - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_1<span style='color:rgba(112,128,144,1)'>.IsNullValue</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>" - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_1<span style='color:rgba(112,128,144,1)'>.ValueType</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_2 <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>();</span>
<span class='span_code_line'></span>json_2<span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"key"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"[json_2] - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_2<span style='color:rgba(112,128,144,1)'>.IsNullValue</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>" - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_2<span style='color:rgba(112,128,144,1)'>.ValueType</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_3 <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>();</span>
<span class='span_code_line'></span>json_3<span style='color:rgba(219,112,147,1)'>.Append</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>2</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>3</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"[json_3] - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_3<span style='color:rgba(112,128,144,1)'>.IsNullValue</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>" - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_3<span style='color:rgba(112,128,144,1)'>.ValueType</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_4 <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>();</span>
<span class='span_code_line'></span>json_4<span style='color:rgba(219,112,147,1)'>.SetValue</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>DateTime</span><span style='color:rgba(112,128,144,1)'>.Now</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"[json_4] - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_4<span style='color:rgba(112,128,144,1)'>.IsNullValue</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>" - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_4<span style='color:rgba(112,128,144,1)'>.ValueType</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_5 <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.CreateArray</span><span style='color:rgba(255,255,255,1)'>();</span>          <span style='color:rgba(0,255,0,1)'>// made by static function</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"[json_5] - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_5<span style='color:rgba(112,128,144,1)'>.IsNullValue</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>" - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_5<span style='color:rgba(112,128,144,1)'>.ValueType</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_6 <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.CreateObject</span><span style='color:rgba(255,255,255,1)'>();</span>         <span style='color:rgba(0,255,0,1)'>// made by static function</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"[json_6] - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_6<span style='color:rgba(112,128,144,1)'>.IsNullValue</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>" - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_6<span style='color:rgba(112,128,144,1)'>.ValueType</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_7 <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.FromObject</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>12</span><span style='color:rgba(255,255,255,1)'>);</span>         <span style='color:rgba(0,255,0,1)'>// made by static function</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"[json_3] - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_7<span style='color:rgba(112,128,144,1)'>.IsNullValue</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>" - "</span> <span style='color:rgba(255,255,255,1)'>+</span> json_7<span style='color:rgba(112,128,144,1)'>.ValueType</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>json_1<span style='color:rgba(255,255,255,1)'>]</span> <span style='color:rgba(255,255,255,1)'>-</span> True <span style='color:rgba(255,255,255,1)'>-</span> Undefined
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>json_2<span style='color:rgba(255,255,255,1)'>]</span> <span style='color:rgba(255,255,255,1)'>-</span> False <span style='color:rgba(255,255,255,1)'>-</span> Object
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>json_3<span style='color:rgba(255,255,255,1)'>]</span> <span style='color:rgba(255,255,255,1)'>-</span> False <span style='color:rgba(255,255,255,1)'>-</span> Array
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>json_4<span style='color:rgba(255,255,255,1)'>]</span> <span style='color:rgba(255,255,255,1)'>-</span> False <span style='color:rgba(255,255,255,1)'>-</span> Datetime
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>json_5<span style='color:rgba(255,255,255,1)'>]</span> <span style='color:rgba(255,255,255,1)'>-</span> False <span style='color:rgba(255,255,255,1)'>-</span> Array
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>json_6<span style='color:rgba(255,255,255,1)'>]</span> <span style='color:rgba(255,255,255,1)'>-</span> False <span style='color:rgba(255,255,255,1)'>-</span> Object
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>json_7<span style='color:rgba(255,255,255,1)'>]</span> <span style='color:rgba(255,255,255,1)'>-</span> False <span style='color:rgba(255,255,255,1)'>-</span> Long</span></pre>
</div>
<div class='div_hightlight' style='background-color:goldenrod;color:black'>
<p>Normally <span class='mark'>SetItem(+n)</span> sets the <span class='mark'>ValueType</span> to <span class='mark'>Object</span>, and <span class='mark'>Append(+n)</span> <span class='mark'>Insert(+n)</span> sets the <span class='mark'>ValueType</span> to <span class='mark'>Array</span>.</p>
</div>
<p>As mentioned above <span class='mark'>STJson</span> has two indexers that can be used to access them, or get values.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_temp <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.CreateArray</span><span style='color:rgba(255,255,255,1)'>()</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"string"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"this is string"</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"array"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>Object</span><span style='color:rgba(255,255,255,1)'>[] {</span> <span style='color:rgba(255,165,0,1)'>"1"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"2"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"3"</span> <span style='color:rgba(255,255,255,1)'>});</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_temp<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"string"</span><span style='color:rgba(255,255,255,1)'>]);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_temp<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"string"</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'>());</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_temp<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"array"</span><span style='color:rgba(255,255,255,1)'>][</span><span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>]);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_temp<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"array"</span><span style='color:rgba(255,255,255,1)'>][</span><span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(100,149,237,1)'>long</span>><span style='color:rgba(255,255,255,1)'>());</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,165,0,1)'>"this is string"</span>
<span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>this is</span> <span style='color:rgba(100,149,237,1)'>string</span>
<span class='span_code_line'></span><span style='color:rgba(255,165,0,1)'>"2"</span>
<span class='span_code_line'></span><span style='color:rgba(144,238,144,1)'>2</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='a_n'>object -&gt; string</h2></div>
<p>With the above example maybe you already know how to convert an object to <span class='mark'>string</span>, by <span class='mark'>STJson.FromObject(object).ToString(+n)</span>, but is it possible that it doesn't really have to be so tedious? For example, <span class='mark'>STJson.Serialize(+n)</span> would be fine????</p>
<p>Actually <span class='mark'>STJson.Serialize(+n)</span> would be more efficient, because it converts the object directly to a string, instead of converting to <span class='mark'>STJson</span> and then to a string.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Serialize</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(255,255,255,1)'>{</span> key <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>"this is test"</span> <span style='color:rgba(255,255,255,1)'>}));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span><span style='color:rgba(255,165,0,1)'>"key"</span><span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(255,165,0,1)'>"this is test"</span><span style='color:rgba(255,255,255,1)'>}</span></pre>
</div>
<p>Of course you can have a more friendly output format:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Serialize</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(255,255,255,1)'>{</span> key <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>"this is test"</span> <span style='color:rgba(255,255,255,1)'>},</span> <span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"key"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"this is test"</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>}</span></pre>
</div>
<p>Or you can serialize directly into a <span class='mark'>TextWriter</span>:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Serialize</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(255,255,255,1)'>{</span> key <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>"this is test"</span> <span style='color:rgba(255,255,255,1)'>},</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>StreamWriter</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"./test.json"</span><span style='color:rgba(255,255,255,1)'>)));</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='a_o'>string -&gt; object</h2></div>
<p>In fact the code does not directly convert <span class='mark'>string</span> to <span class='mark'>object</span>. That's because the string has to be parsed before that to make sure it's a properly formatted <span class='mark'>Json</span>. But by the time it's done, it's already got an <span class='mark'>STJson</span> object. Finally the <span class='mark'>STJson</span> is converted to <span class='mark'>object</span>.</p>
<p>So you will see the following file in the source code <span class='mark'>STLib.Json.Converter</span>:</p>
<p><span class='mark'>ObjectToSTJson.cs</span> <span class='mark'>ObjectToString.cs</span> <span class='mark'>STJsonToObject.cs</span></p>
<p>There is no <span class='mark'>StringToObject.cs</span> file in there, and the source code for <span class='mark'>STJson.Deserialize(+n)</span> is as follows:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>public static</span> <span style='color:rgba(0,255,255,1)'>T</span> <span style='color:rgba(255,0,255,1)'>Deserialize</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(0,255,255,1)'>T</span>><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(100,149,237,1)'>string</span> strJson<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,255,255,1)'>+</span>n<span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>    <span style='color:rgba(100,149,237,1)'>var</span> json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJsonParser</span><span style='color:rgba(219,112,147,1)'>.Parse</span><span style='color:rgba(255,255,255,1)'>(</span>strJson<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>return</span> <span style='color:rgba(0,255,255,1)'>STJsonToObject</span><span style='color:rgba(219,112,147,1)'>.Get</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(0,255,255,1)'>T</span>><span style='color:rgba(255,255,255,1)'>(</span>json<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,255,255,1)'>+</span>n<span style='color:rgba(255,255,255,1)'>);
<span class='span_code_line'></span>}</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='a_p'>STJson -&gt; object</h2></div>
<p>I'm sure the author doesn't need to explain how to convert a string to an object and the reader should know how to handle it, but it's worth stating here that <span class='mark'>STJson</span> can be appended to an object to enable localized updates.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>public class</span> <span style='color:rgba(0,255,255,1)'>TestClass</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public</span> <span style='color:rgba(100,149,237,1)'>int</span> X<span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public</span> <span style='color:rgba(100,149,237,1)'>int</span> Y<span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>}</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>TestClass</span> tc <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>TestClass</span><span style='color:rgba(255,255,255,1)'>() {</span>
<span class='span_code_line'></span>    X <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    Y <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(144,238,144,1)'>20</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>};</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>STJson</span> json_test <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>()</span><span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"Y"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Deserialize</span><span style='color:rgba(255,255,255,1)'>(</span>json_test<span style='color:rgba(255,255,255,1)'>,</span> tc<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Serialize</span><span style='color:rgba(255,255,255,1)'>(</span>tc<span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span> <span style='color:rgba(255,255,255,1)'>{</span><span style='color:rgba(255,165,0,1)'>"X"</span><span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(255,165,0,1)'>"Y"</span><span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>}</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='a_q'>STJsonConverter</h2></div>
<p>Although there are a lot of type conversions built into <span class='mark'>STJson</span>, and even types that aren't there are recursive. But sometimes the situation is not very friendly. For example:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Rectangle</span> rect <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>Rectangle</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Serialize</span><span style='color:rgba(255,255,255,1)'>(</span>rect<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"Location"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"IsEmpty"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(30,144,255,1)'>false</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"X"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"Y"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>10</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>},</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"Size"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"IsEmpty"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(30,144,255,1)'>false</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"Width"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"Height"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>100</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>},</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"X"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"Y"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"Width"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"Height"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"Left"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"Top"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"Right"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>110</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"Bottom"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>110</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"IsEmpty"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(30,144,255,1)'>false</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>}</span></pre>
</div>
<p>Obviously, this result is overly complicated because all the fields of <span class='mark'>Rectangle</span> are recursively out. But what if this is the case?</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>public class</span> <span style='color:rgba(0,255,255,1)'>RectangleConverter</span> <span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(0,255,255,1)'>STJsonConverter</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public override</span> <span style='color:rgba(100,149,237,1)'>object</span> <span style='color:rgba(255,0,255,1)'>JsonToObject</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>Type</span> t<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(0,255,255,1)'>STJson</span> json<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>ref</span> bool <span style='color:rgba(0,255,255,1)'>bProcessed</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>return new</span> <span style='color:rgba(0,255,255,1)'>Rectangle</span><span style='color:rgba(255,255,255,1)'>(</span>
<span class='span_code_line'></span>            json<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"x"</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(100,149,237,1)'>int</span>><span style='color:rgba(255,255,255,1)'>(),</span>
<span class='span_code_line'></span>            json<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"y"</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(100,149,237,1)'>int</span>><span style='color:rgba(255,255,255,1)'>(),</span>
<span class='span_code_line'></span>            json<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"w"</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(100,149,237,1)'>int</span>><span style='color:rgba(255,255,255,1)'>(),</span>
<span class='span_code_line'></span>            json<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"h"</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(100,149,237,1)'>int</span>><span style='color:rgba(255,255,255,1)'>());
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public override</span> <span style='color:rgba(0,255,255,1)'>STJson</span> <span style='color:rgba(255,0,255,1)'>ObjectToJson</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>Type</span> t<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(100,149,237,1)'>object</span> obj<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>ref</span> bool <span style='color:rgba(0,255,255,1)'>bProcessed</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(0,255,255,1)'>Rectangle</span> rect <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>Rectangle</span><span style='color:rgba(255,255,255,1)'>)</span>obj<span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>return</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.New</span><span style='color:rgba(255,255,255,1)'>()</span>
<span class='span_code_line'></span>            <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"x"</span><span style='color:rgba(255,255,255,1)'>,</span> rect<span style='color:rgba(112,128,144,1)'>.X</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>            <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"y"</span><span style='color:rgba(255,255,255,1)'>,</span> rect<span style='color:rgba(112,128,144,1)'>.Y</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>            <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"w"</span><span style='color:rgba(255,255,255,1)'>,</span> rect<span style='color:rgba(112,128,144,1)'>.Width</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>            <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"h"</span><span style='color:rgba(255,255,255,1)'>,</span> rect<span style='color:rgba(112,128,144,1)'>.Height</span><span style='color:rgba(255,255,255,1)'>);
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public override</span> <span style='color:rgba(100,149,237,1)'>string</span> <span style='color:rgba(255,0,255,1)'>ObjectToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>Type</span> t<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(100,149,237,1)'>object</span> obj<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>ref</span> bool <span style='color:rgba(0,255,255,1)'>bProcessed</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(0,255,0,1)'>//return "{\"x\":" + ... + "}"</span>
<span class='span_code_line'></span>        <span style='color:rgba(100,149,237,1)'>var</span> json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>this</span><span style='color:rgba(219,112,147,1)'>.ObjectToJson</span><span style='color:rgba(255,255,255,1)'>(</span>t<span style='color:rgba(255,255,255,1)'>,</span> obj<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>ref</span> bProcessed<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>bProcessed<span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>return</span> json<span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>();
<span class='span_code_line'></span>        }</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>return null</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>}</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Rectangle</span> rect <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>Rectangle</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.AddCustomConverter</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(100,149,237,1)'>typeof</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>Rectangle</span><span style='color:rgba(255,255,255,1)'>),</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>RectangleConverter</span><span style='color:rgba(255,255,255,1)'>());</span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>string</span> strResult <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Serialize</span><span style='color:rgba(255,255,255,1)'>(</span>rect<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>strResult<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>rect <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Deserialize</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(0,255,255,1)'>Rectangle</span>><span style='color:rgba(255,255,255,1)'>(</span>strResult<span style='color:rgba(219,112,147,1)'>.Replace</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"100"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"200"</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>rect<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span><span style='color:rgba(255,165,0,1)'>"x"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(255,165,0,1)'>"y"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(255,165,0,1)'>"w"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(255,165,0,1)'>"h"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>{</span>X<span style='color:rgba(255,255,255,1)'>=</span><span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span>Y<span style='color:rgba(255,255,255,1)'>=</span><span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span>Width<span style='color:rgba(255,255,255,1)'>=</span><span style='color:rgba(144,238,144,1)'>200</span><span style='color:rgba(255,255,255,1)'>,</span>Height<span style='color:rgba(255,255,255,1)'>=</span><span style='color:rgba(144,238,144,1)'>200</span><span style='color:rgba(255,255,255,1)'>}</span></pre>
</div>
<div class='div_hightlight' style='background-color:goldenrod;color:black'>
<p>Where <span class='mark'>bProcessed</span> is passed in with a default value of <span class='mark'>true</span>, and the default processing is used when the higher level function gets <span class='mark'>false</span>.</p>
</div>
<p><span class='mark'>STJsonConverter</span> provides the <span class='mark'>Attribute</span> class, which can also be used to mark object attributes.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>public class</span> <span style='color:rgba(0,255,255,1)'>Test</span><span style='color:rgba(255,255,255,1)'>{
<span class='span_code_line'></span>    [</span><span style='color:rgba(0,255,255,1)'>STJsonConverter</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>typeof</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>RectangleConverter</span><span style='color:rgba(255,255,255,1)'>))]</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public</span> <span style='color:rgba(0,255,255,1)'>Rectangle</span> Rect<span style='color:rgba(255,255,255,1)'>{</span><span style='color:rgba(30,144,255,1)'>get</span><span style='color:rgba(255,255,255,1)'>;</span> <span style='color:rgba(30,144,255,1)'>set</span><span style='color:rgba(255,255,255,1)'>;}
<span class='span_code_line'></span>}</span></pre>
</div>
<span style='display:block'><span class='span_code_title'>STJsonConverter.cs</span></span>
<div class='div_code title'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>public abstract class</span> <span style='color:rgba(0,255,255,1)'>STJsonConverter</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public virtual</span> <span style='color:rgba(0,255,255,1)'>STJson</span> <span style='color:rgba(255,0,255,1)'>ObjectToJson</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>Type</span> t<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(100,149,237,1)'>object</span> obj<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>ref</span> bool <span style='color:rgba(0,255,255,1)'>bProcessed</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        bProcessed <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>false</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>return null</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public virtual</span> <span style='color:rgba(100,149,237,1)'>string</span> <span style='color:rgba(255,0,255,1)'>ObjectToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>Type</span> t<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(100,149,237,1)'>object</span> obj<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>ref</span> bool <span style='color:rgba(0,255,255,1)'>bProcessed</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        bProcessed <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>false</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>return null</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public virtual</span> <span style='color:rgba(100,149,237,1)'>object</span> <span style='color:rgba(255,0,255,1)'>JsonToObject</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>Type</span> t<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(0,255,255,1)'>STJson</span> json<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>ref</span> bool <span style='color:rgba(0,255,255,1)'>bProcessed</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        bProcessed <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>false</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>return null</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>}</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='a_r'>STJsonAttribute</h2></div>
<p>Maybe you don't want to output all the attributes when serializing, then you can control that with <span class='mark'>STJsonAttribute</span>.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span>[<span style='color:rgba(219,112,147,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>STJsonSerilizaMode</span><span style='color:rgba(112,128,144,1)'>.Include</span><span style='color:rgba(255,255,255,1)'>)]</span>    <span style='color:rgba(0,255,0,1)'>// optional</span>
<span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>public class</span> <span style='color:rgba(0,255,255,1)'>Student</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{
<span class='span_code_line'></span>    [</span><span style='color:rgba(0,255,255,1)'>STJsonProperty</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"test_name"</span><span style='color:rgba(255,255,255,1)'>)]</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public</span> <span style='color:rgba(100,149,237,1)'>string</span> Name<span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public</span> <span style='color:rgba(100,149,237,1)'>int</span> Age<span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public</span> <span style='color:rgba(0,255,255,1)'>Gender</span> Gender<span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>    [</span>STJsonProperty<span style='color:rgba(255,255,255,1)'>]</span>                        <span style='color:rgba(0,255,0,1)'>// optional</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public</span> <span style='color:rgba(0,255,255,1)'>List</span><<span style='color:rgba(100,149,237,1)'>string</span>> Hobby<span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>}</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>public enum</span> <span style='color:rgba(0,255,255,1)'>Gender</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    Male<span style='color:rgba(255,255,255,1)'>,</span> Female
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>}</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> stu <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>Student</span><span style='color:rgba(255,255,255,1)'>() {</span>
<span class='span_code_line'></span>    Name <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    Age <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    Gender <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>Gender</span><span style='color:rgba(112,128,144,1)'>.Male</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    Hobby <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>List</span><<span style='color:rgba(100,149,237,1)'>string</span>><span style='color:rgba(255,255,255,1)'>() {</span> <span style='color:rgba(255,165,0,1)'>"Game"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Sing"</span> <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>};</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span>str <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Serialize</span><span style='color:rgba(255,255,255,1)'>(</span>stu<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>str<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span><span style='color:rgba(255,165,0,1)'>"test_name"</span><span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(255,165,0,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(255,165,0,1)'>"Hobby"</span><span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"Cooking"</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(255,165,0,1)'>"Sports"</span><span style='color:rgba(255,255,255,1)'>]}</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='a_s'>STJsonSetting</h2></div>
<p><span class='mark'>STJsonSetting</span> is used to add some personalized settings in serialization or deserialization. Originally, the settings were global. But with the increase of some settings, the author thinks the global settings are too coupled, so <span class='mark'>STJsonSetting</span> is independent to decouple them. And the independent settings class can also facilitate the expansion of functionality in subsequent versions, of course, the probability of subsequent versions is not very large. Because the author is very lazy.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> stu <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>Student</span><span style='color:rgba(255,255,255,1)'>() {</span>
<span class='span_code_line'></span>    Name <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    Age <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    Gender <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>Gender</span><span style='color:rgba(112,128,144,1)'>.Male</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    Hobby <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>List</span><<span style='color:rgba(100,149,237,1)'>string</span>><span style='color:rgba(255,255,255,1)'>() {</span> <span style='color:rgba(255,165,0,1)'>"Game"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Sing"</span> <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>};</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>STJsonSetting</span> setting <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJsonSetting</span><span style='color:rgba(255,255,255,1)'>();</span>
<span class='span_code_line'></span>setting<span style='color:rgba(112,128,144,1)'>.EnumUseNumber</span> <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>setting<span style='color:rgba(112,128,144,1)'>.IgnoreAttribute</span> <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>setting<span style='color:rgba(112,128,144,1)'>.Mode</span> <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJsonSettingKeyMode</span><span style='color:rgba(112,128,144,1)'>.Exclude</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>setting<span style='color:rgba(112,128,144,1)'>.KeyList</span><span style='color:rgba(219,112,147,1)'>.Add</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"Age"</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>str <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Serialize</span><span style='color:rgba(255,255,255,1)'>(</span>stu<span style='color:rgba(255,255,255,1)'>,</span> setting<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Format</span><span style='color:rgba(255,255,255,1)'>(</span>str<span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Deserialize</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(0,255,255,1)'>Student</span>><span style='color:rgba(255,255,255,1)'>(</span>str<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"test_name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"Gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"Hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"Game"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Sing"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>}</span></pre>
</div>
<div class='div_hightlight' style='background-color:pink;color:black'>
<p><span class='mark'>Attribute</span> has a higher priority than <span class='mark'>STJsonSetting</span>.</p>
</div>
<div><h2 class='h_option anchor_point' name='a_t'>JSON5</h2></div>
<p>Support for <a class='mark' target='_blank' href='https://json5.org/'>JSON5</a> is provided in <span class='mark'>STJson(3.0)</span>, and the author provides some more convenient ideas, as exemplified by the following text:</p>
<span style='display:block'><span class='span_code_title'>json5.txt</span></span>
<div class='div_code title'>
<pre class='pre_code'><span class='span_code_line'></span><span>{
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"normal_key"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"This is a normal key and value."</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(0,255,0,1)'>// this is a line comment。
<span class='span_code_line'></span>    /*
<span class='span_code_line'></span>       this is a block comment。
<span class='span_code_line'></span>    */</span>
<span class='span_code_line'></span>    str_value_1<span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>'string_1'</span><span style='color:rgba(255,255,255,1)'>,</span>        <span style='color:rgba(0,255,0,1)'>// For a key the ["] is not must.</span>
<span class='span_code_line'></span>    str_value_2<span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"string_2"</span><span style='color:rgba(255,255,255,1)'>,</span>        <span style='color:rgba(0,255,0,1)'>// For a string you can use ['] or ["]</span>
<span class='span_code_line'></span>    int_numbers<span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>                  <span style='color:rgba(0,255,0,1)'>// Hex number</span>
<span class='span_code_line'></span>        <span style='color:rgba(144,238,144,1)'>0x123</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,255,255,1)'>-</span><span style='color:rgba(144,238,144,1)'>0x123</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,255,255,1)'>+</span><span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,255,255,1)'>-</span><span style='color:rgba(144,238,144,1)'>123</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>'float_numbers'</span><span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(112,128,144,1)'>.</span><span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>123</span>.<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,255,255,1)'>-</span><span style='color:rgba(112,128,144,1)'>.</span><span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,255,255,1)'>+</span><span style='color:rgba(144,238,144,1)'>123</span>.<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,255,255,1)'>+</span><span style='color:rgba(144,238,144,1)'>123E</span><span style='color:rgba(255,255,255,1)'>-</span><span style='color:rgba(144,238,144,1)'>2</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,0,1)'>// From json 5 -> https://json5.org</span>
<span class='span_code_line'></span>    string_1<span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"string_1.\<br/>string_2.\<br/>    |<- some space"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,0,1)'>// But in STJson you can just use [\r\n] line breaks and keep the line breaks.</span>
<span class='span_code_line'></span>    string_2<span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"string_1.<br/>string_2.<br/>        |<- some space"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,0,1)'>// Or even use it that way. The authors consider JSON5's line continuation to be unfriendly.
<span class='span_code_line'></span>    // After a line break via [\], the new line cannot be preceded by whitespace or it will be parsed into the string.
<span class='span_code_line'></span>    // So STJson allows consecutive strings and eventually merges them into a single string.</span>
<span class='span_code_line'></span>    string_3<span style='color:rgba(255,255,255,1)'>:</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"string_1."
<span class='span_code_line'></span>            "string_2."
<span class='span_code_line'></span>            "\r\nstring_3."</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    array<span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(255,165,0,1)'>"string_1.""string_2."</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(255,165,0,1)'>"string_3"</span><span style='color:rgba(255,255,255,1)'>,
<span class='span_code_line'></span>    ],
<span class='span_code_line'></span>}</span></pre>
</div>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> str_file <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>"./json5.txt"</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> str_json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>File</span><span style='color:rgba(219,112,147,1)'>.ReadAllText</span><span style='color:rgba(255,255,255,1)'>(</span>str_file<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(0,255,255,1)'>Encoding</span><span style='color:rgba(112,128,144,1)'>.UTF8</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Deserialize</span><span style='color:rgba(255,255,255,1)'>(</span>str_json<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json<span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"normal_key"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"This is a normal key and value."</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"str_value_1"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"string_1"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"str_value_2"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"string_2"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"int_numbers"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(144,238,144,1)'>291</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>-</span><span style='color:rgba(144,238,144,1)'>291</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>-</span><span style='color:rgba(144,238,144,1)'>123</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"float_numbers"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(112,128,144,1)'>.</span><span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>-</span><span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(112,128,144,1)'>.</span><span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(112,128,144,1)'>.</span><span style='color:rgba(144,238,144,1)'>23</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"string_1"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"string_1.string_2.    |<- some space"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"string_2"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"string_1.\r\nstring_2.\r\n        |<- some space"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"string_3"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"string_1.string_2.\r\nstring_3."</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"array"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(144,238,144,1)'>123</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"string_1.string_2."</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"string_3"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>}</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='a_u'>STJsonReader</h2></div>
<p><span class='mark'>STJsonReader</span> can take characters from a <span class='mark'>TextReader</span> and parse them dynamically, usually used for parsing large text data. E.g. load a <span class='mark'>Json</span> data from a file or stream via <span class='mark'>StreamReader</span>.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>string</span> str_json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>@"
<span class='span_code_line'></span>{
<span class='span_code_line'></span>    name: 'DebugST',
<span class='span_code_line'></span>    language: ['C#', 'JS'],
<span class='span_code_line'></span>    address: {
<span class='span_code_line'></span>        country: 'China',
<span class='span_code_line'></span>        province: 'GuangDong',
<span class='span_code_line'></span>        city: 'ShenZhen'
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>}"</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>using</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(100,149,237,1)'>var</span> reader <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJsonReader</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>StringReader</span><span style='color:rgba(255,255,255,1)'>(</span>str_json<span style='color:rgba(255,255,255,1)'>))) {</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>foreach</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(100,149,237,1)'>var</span> v <span style='color:rgba(30,144,255,1)'>in</span> reader<span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(0,255,0,1)'>//Console.WriteLine(STJson.Serialize(v, 4));</span>
<span class='span_code_line'></span>        <span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>v<span style='color:rgba(112,128,144,1)'>.Path</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>": "</span> <span style='color:rgba(255,255,255,1)'>+</span> v<span style='color:rgba(112,128,144,1)'>.Text</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>" - ["</span> <span style='color:rgba(255,255,255,1)'>+</span> v<span style='color:rgba(112,128,144,1)'>.ValueType</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>"]"</span><span style='color:rgba(255,255,255,1)'>);
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>}</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span>name<span style='color:rgba(255,255,255,1)'>:</span> DebugST <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(255,255,255,1)'>[</span>String<span style='color:rgba(255,255,255,1)'>]</span>
<span class='span_code_line'></span>language<span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>...<span style='color:rgba(255,255,255,1)'>]</span> <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(255,255,255,1)'>[</span>Array<span style='color:rgba(255,255,255,1)'>]</span>
<span class='span_code_line'></span>language<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(255,255,255,1)'>:</span> C# <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(255,255,255,1)'>[</span>String<span style='color:rgba(255,255,255,1)'>]</span>
<span class='span_code_line'></span>language<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(255,255,255,1)'>:</span> JS <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(255,255,255,1)'>[</span>String<span style='color:rgba(255,255,255,1)'>]</span>
<span class='span_code_line'></span>address<span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>...<span style='color:rgba(255,255,255,1)'>}</span> <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(255,255,255,1)'>[</span>Object<span style='color:rgba(255,255,255,1)'>]</span>
<span class='span_code_line'></span>address<span style='color:rgba(112,128,144,1)'>.country</span><span style='color:rgba(255,255,255,1)'>:</span> China <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(255,255,255,1)'>[</span>String<span style='color:rgba(255,255,255,1)'>]</span>
<span class='span_code_line'></span>address<span style='color:rgba(112,128,144,1)'>.province</span><span style='color:rgba(255,255,255,1)'>:</span> GuangDong <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(255,255,255,1)'>[</span>String<span style='color:rgba(255,255,255,1)'>]</span>
<span class='span_code_line'></span>address<span style='color:rgba(112,128,144,1)'>.city</span><span style='color:rgba(255,255,255,1)'>:</span> ShenZhen <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(255,255,255,1)'>[</span>String<span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<p>By default <span class='mark'>STJsonReader</span> recurses all data. Change the code slightly:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>foreach</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(100,149,237,1)'>var</span> v <span style='color:rgba(30,144,255,1)'>in</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Read</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>StringReader</span><span style='color:rgba(255,255,255,1)'>(</span>str_json<span style='color:rgba(255,255,255,1)'>))) {</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>v<span style='color:rgba(112,128,144,1)'>.Path</span> <span style='color:rgba(255,255,255,1)'>==</span> <span style='color:rgba(255,165,0,1)'>"language"</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>v<span style='color:rgba(219,112,147,1)'>.GetSTJson</span><span style='color:rgba(255,255,255,1)'>()</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));
<span class='span_code_line'></span>    }</span> <span style='color:rgba(30,144,255,1)'>else</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>v<span style='color:rgba(112,128,144,1)'>.Path</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>": "</span> <span style='color:rgba(255,255,255,1)'>+</span> v<span style='color:rgba(112,128,144,1)'>.Text</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>" - ["</span> <span style='color:rgba(255,255,255,1)'>+</span> v<span style='color:rgba(112,128,144,1)'>.ValueType</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>"]"</span><span style='color:rgba(255,255,255,1)'>);
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>}</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span>name<span style='color:rgba(255,255,255,1)'>:</span> DebugST <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(255,255,255,1)'>[</span>String<span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>[</span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,255,1)'>"C#"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"JS"</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span>
<span class='span_code_line'></span>address<span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>...<span style='color:rgba(255,255,255,1)'>}</span> <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(255,255,255,1)'>[</span>Object<span style='color:rgba(255,255,255,1)'>]</span>
<span class='span_code_line'></span>address<span style='color:rgba(112,128,144,1)'>.country</span><span style='color:rgba(255,255,255,1)'>:</span> China <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(255,255,255,1)'>[</span>String<span style='color:rgba(255,255,255,1)'>]</span>
<span class='span_code_line'></span>address<span style='color:rgba(112,128,144,1)'>.province</span><span style='color:rgba(255,255,255,1)'>:</span> GuangDong <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(255,255,255,1)'>[</span>String<span style='color:rgba(255,255,255,1)'>]</span>
<span class='span_code_line'></span>address<span style='color:rgba(112,128,144,1)'>.city</span><span style='color:rgba(255,255,255,1)'>:</span> ShenZhen <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(255,255,255,1)'>[</span>String<span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<p><span class='mark'>GetSTJson()</span> will keep fetching data backwards from the current position until it stops fetching a complete <span class='mark'>STJson</span> object. And as you can see, in subsequent iterations, <span class='mark'>language</span> has been skipped because he was fetched by <span class='mark'>GetSTJson()</span>.</p>
<div class='div_hightlight' style='background-color:pink;color:black'>
<p><span class='mark'>STJsonReader</span> performance is much lower than <span class='mark'>STJson.Deserialize(+n)</span>, and there is no intention to optimize <span class='mark'>STJsonReader</span> at this time. The authors believe that <span class='mark'>STJsonReader</span> is only used in special scenarios, however special scenarios are not considered for performance.</p>
</div>
<div class='div_hightlight' style='background-color:goldenrod;color:black'>
<p>And since <span class='mark'>STJsonReader</span> uses dynamic parsing, and <span class='mark'>STJson</span> is not parsed by a state machine, the author does not intend to do strict <span class='mark'>Json</span> data format checking. So the following code also works fine and is equivalent to <span class='mark'>str_json</span> above.</p>
</div>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>string</span> str_json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>@"
<span class='span_code_line'></span>{
<span class='span_code_line'></span>    name 'DebugST'
<span class='span_code_line'></span>    language: ['C#' 'JS'],
<span class='span_code_line'></span>    address: {
<span class='span_code_line'></span>        country: 'China',,,,,,,
<span class='span_code_line'></span>        province: 'GuangDong',,,,
<span class='span_code_line'></span>        city:::::::::::: 'ShenZhen'"</span><span style='color:rgba(255,255,255,1)'>;</span></pre>
</div>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>string</span> str_json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>@"
<span class='span_code_line'></span>{
<span class='span_code_line'></span>    name: 'DebugST',
<span class='span_code_line'></span>    language: ['C#', 'JS'],
<span class='span_code_line'></span>    address: {
<span class='span_code_line'></span>        country: 'China',,,,,,,
<span class='span_code_line'></span>        province: 'GuangDong',,,,
<span class='span_code_line'></span>        city:::::::::::: 'ShenZhen'
<span class='span_code_line'></span>    }}}}}}}}}}
<span class='span_code_line'></span>}1234567890"</span><span style='color:rgba(255,255,255,1)'>;</span></pre>
</div>
<div class='div_hightlight' style='background-color:pink;color:black'>
<p>When <span class='mark'>STJsonReader</span> is dynamically parsed, the author ignores <span class='mark'>:</span><span class='mark'>,</span>. This way, when reading a <span class='mark'>key-value pair</span>, you only need to read two <span class='mark'>tokens</span>. The first one is used as the <span class='mark'>key</span> and the second one is used as the <span class='mark'>value</span>. Part of the source code is as follows:</p>
</div>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>private</span> <span style='color:rgba(0,255,255,1)'>STJsonToken</span> <span style='color:rgba(255,0,255,1)'>GetNextFilteredToken</span><span style='color:rgba(255,255,255,1)'>()
<span class='span_code_line'></span>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>foreach</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(100,149,237,1)'>var</span> v <span style='color:rgba(30,144,255,1)'>in</span> m_token_reader<span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>switch</span> <span style='color:rgba(255,255,255,1)'>(</span>v<span style='color:rgba(112,128,144,1)'>.Type</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>case</span> <span style='color:rgba(0,255,255,1)'>STJsonTokenType</span><span style='color:rgba(112,128,144,1)'>.KVSplitor</span><span style='color:rgba(255,255,255,1)'>:</span>     <span style='color:rgba(0,255,0,1)'>// :</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>case</span> <span style='color:rgba(0,255,255,1)'>STJsonTokenType</span><span style='color:rgba(112,128,144,1)'>.ItemSplitor</span><span style='color:rgba(255,255,255,1)'>:</span>   <span style='color:rgba(0,255,0,1)'>// ,</span>
<span class='span_code_line'></span>                <span style='color:rgba(30,144,255,1)'>continue</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>default</span><span style='color:rgba(255,255,255,1)'>:</span>
<span class='span_code_line'></span>                <span style='color:rgba(30,144,255,1)'>return</span> v<span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>        }
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>return</span> <span style='color:rgba(0,255,255,1)'>STJsonToken</span><span style='color:rgba(112,128,144,1)'>.None</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>}</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>private</span> <span style='color:rgba(0,255,255,1)'>STJsonReaderItem</span> <span style='color:rgba(255,0,255,1)'>GetNextObjectKV</span><span style='color:rgba(255,255,255,1)'>()
<span class='span_code_line'></span>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(100,149,237,1)'>var</span> token_key <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>this</span><span style='color:rgba(219,112,147,1)'>.GetNextFilteredToken</span><span style='color:rgba(255,255,255,1)'>();</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>switch</span> <span style='color:rgba(255,255,255,1)'>(</span>token_key<span style='color:rgba(112,128,144,1)'>.Type</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>case</span> <span style='color:rgba(0,255,255,1)'>STJsonTokenType</span><span style='color:rgba(112,128,144,1)'>.None</span><span style='color:rgba(255,255,255,1)'>:</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>return null</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>case</span> <span style='color:rgba(0,255,255,1)'>STJsonTokenType</span><span style='color:rgba(112,128,144,1)'>.ObjectEnd</span><span style='color:rgba(255,255,255,1)'>:</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>this</span><span style='color:rgba(219,112,147,1)'>.PopStack</span><span style='color:rgba(255,255,255,1)'>();</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>return this</span><span style='color:rgba(219,112,147,1)'>.GetNextItem</span><span style='color:rgba(255,255,255,1)'>();</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>case</span> <span style='color:rgba(0,255,255,1)'>STJsonTokenType</span><span style='color:rgba(112,128,144,1)'>.Symbol</span><span style='color:rgba(255,255,255,1)'>:</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>case</span> <span style='color:rgba(0,255,255,1)'>STJsonTokenType</span><span style='color:rgba(112,128,144,1)'>.String</span><span style='color:rgba(255,255,255,1)'>:</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>break</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>default</span><span style='color:rgba(255,255,255,1)'>:</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>throw new</span> <span style='color:rgba(0,255,255,1)'>STJsonParseException</span><span style='color:rgba(255,255,255,1)'>(</span>token_key<span style='color:rgba(255,255,255,1)'>);
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>    m_current_stack<span style='color:rgba(112,128,144,1)'>.Key</span> <span style='color:rgba(255,255,255,1)'>=</span> token_key<span style='color:rgba(112,128,144,1)'>.Value</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>    <span style='color:rgba(100,149,237,1)'>var</span> token_val <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>this</span><span style='color:rgba(219,112,147,1)'>.GetNextFilteredToken</span><span style='color:rgba(255,255,255,1)'>();</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>token_val<span style='color:rgba(112,128,144,1)'>.Type</span> <span style='color:rgba(255,255,255,1)'>==</span> <span style='color:rgba(0,255,255,1)'>STJsonTokenType</span><span style='color:rgba(112,128,144,1)'>.None</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>return null</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>        <span style='color:rgba(0,255,0,1)'>//throw new Exception("error");</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}</span>
<span class='span_code_line'></span>    <span style='color:rgba(100,149,237,1)'>var</span> item <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJsonReaderItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>this</span><span style='color:rgba(255,255,255,1)'>,</span> token_val<span style='color:rgba(255,255,255,1)'>)
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        ParentType <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJsonValueType</span><span style='color:rgba(112,128,144,1)'>.Object</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        Key <span style='color:rgba(255,255,255,1)'>=</span> token_key<span style='color:rgba(112,128,144,1)'>.Value</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        Text <span style='color:rgba(255,255,255,1)'>=</span> token_val<span style='color:rgba(112,128,144,1)'>.Value</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>};</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>return this</span><span style='color:rgba(219,112,147,1)'>.CheckValueToken</span><span style='color:rgba(255,255,255,1)'>(</span>item<span style='color:rgba(255,255,255,1)'>,</span> token_val<span style='color:rgba(255,255,255,1)'>);
<span class='span_code_line'></span>}</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>private</span> <span style='color:rgba(0,255,255,1)'>STJsonReaderItem</span> <span style='color:rgba(255,0,255,1)'>GetNextArrayItem</span><span style='color:rgba(255,255,255,1)'>(){</span>...<span style='color:rgba(255,255,255,1)'>}</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='a_v'>STJsonWriter</h2></div>
<p><span class='mark'>STJsonWriter</span> plays the opposite role to <span class='mark'>STJsonReader</span>, <span class='mark'>STJsonWriter</span> can be used to construct and write <span class='mark'>Json</span> strings in real time directly to a <span class='mark'>TextWriter</span> or stream.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>StringWriter</span> sw <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>StringWriter</span><span style='color:rgba(255,255,255,1)'>();</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>//using (var writer = new STJsonWriter(sw)) {
<span class='span_code_line'></span>//    writer.StartWithArray((w) =>
<span class='span_code_line'></span>//    {
<span class='span_code_line'></span>//        // writer == w
<span class='span_code_line'></span>//    });
<span class='span_code_line'></span>//}</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Write</span><span style='color:rgba(255,255,255,1)'>(</span>sw<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.StartWithArray</span><span style='color:rgba(255,255,255,1)'>((</span>w<span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(255,255,255,1)'>=></span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>for</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(100,149,237,1)'>int</span> i <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>;</span> i <span style='color:rgba(255,255,255,1)'><</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>;</span> i<span style='color:rgba(255,255,255,1)'>++</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"Level:"</span> <span style='color:rgba(255,255,255,1)'>+</span> w<span style='color:rgba(112,128,144,1)'>.Level</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>        w<span style='color:rgba(219,112,147,1)'>.CreateObject</span><span style='color:rgba(255,255,255,1)'>(()</span> <span style='color:rgba(255,255,255,1)'>=></span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            <span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"Level:"</span> <span style='color:rgba(255,255,255,1)'>+</span> w<span style='color:rgba(112,128,144,1)'>.Level</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>            w
<span class='span_code_line'></span>            <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"DebugST"</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>            <span style='color:rgba(0,255,0,1)'>//.SetItem("language", STJson.CreateArray("C#", "JS"))
<span class='span_code_line'></span>            //.SetItem("language", new string[] { "C#", "JS" })</span>
<span class='span_code_line'></span>            <span style='color:rgba(219,112,147,1)'>.SetArray</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"language"</span><span style='color:rgba(255,255,255,1)'>, ()</span> <span style='color:rgba(255,255,255,1)'>=></span>
<span class='span_code_line'></span>            <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                <span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"Level:"</span> <span style='color:rgba(255,255,255,1)'>+</span> w<span style='color:rgba(112,128,144,1)'>.Level</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>                w
<span class='span_code_line'></span>                <span style='color:rgba(219,112,147,1)'>.Append</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"C#"</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>                <span style='color:rgba(219,112,147,1)'>.Append</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"JS"</span><span style='color:rgba(255,255,255,1)'>);
<span class='span_code_line'></span>            })</span>
<span class='span_code_line'></span>            <span style='color:rgba(219,112,147,1)'>.SetObject</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"address"</span><span style='color:rgba(255,255,255,1)'>, ()</span> <span style='color:rgba(255,255,255,1)'>=></span>
<span class='span_code_line'></span>            <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                <span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"Level:"</span> <span style='color:rgba(255,255,255,1)'>+</span> w<span style='color:rgba(112,128,144,1)'>.Level</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>                w
<span class='span_code_line'></span>                <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"country"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"china"</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>                <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"province"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"GuangDong"</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>                <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"city"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"ShenZhen"</span><span style='color:rgba(255,255,255,1)'>);
<span class='span_code_line'></span>            });
<span class='span_code_line'></span>        });
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>});</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>sw<span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>());</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span>Level<span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>Level<span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(144,238,144,1)'>2</span>
<span class='span_code_line'></span>Level<span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(144,238,144,1)'>3</span>
<span class='span_code_line'></span>Level<span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(144,238,144,1)'>3</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"DebugST"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"language"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"C#"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"JS"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"address"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"country"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"china"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"province"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"GuangDong"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"city"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"ShenZhen"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>]</span></pre>
</div>
<div class='div_hightlight' style='background-color:skyblue;color:black'>
<p><span class='mark'>STJsonWriter</span> uses a hierarchical approach to callbacks in order to be consistent with the data structure hierarchy of the target <span class='mark'>Json</span>. As shown above, <span class='mark'>STJsonWriter</span> manages the level of callback functions internally.</p>
</div>
<div><h2 class='h_option anchor_point' name='a_w'>json_src [Important]</h2></div>
<p>In the next tutorial we will use some test data, which is as follows:</p>
<span style='display:block'><span class='span_code_title'>test.json</span></span>
<div class='div_code title'>
<pre class='pre_code'><span class='span_code_line'></span><span>[<span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"cooking"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"sing"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>},{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tony"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"game"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"dance"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>},{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Andy"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>20</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"draw"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"sing"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>},{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>26</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"sing"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"dance"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"rap"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"basketball"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>}]</span></pre>
</div>
<p>Load it into the program:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_src <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Deserialize</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>System</span><span style='color:rgba(112,128,144,1)'>.IO.File</span><span style='color:rgba(219,112,147,1)'>.ReadAllText</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"./test.json"</span><span style='color:rgba(255,255,255,1)'>));</span></pre>
</div>
<div class='div_hightlight' style='background-color:pink;color:black'>
<p>Subsequent cases where <span class='mark'>json_src</span> appears are the above objects.</p>
</div>
<h1 class='h_title anchor_point' name='a_x'>STJsonPath</h1>
<p>In the source code <span class='mark'>STJsonExtension.cs</span>, the functionality of <span class='mark'>STJson</span> is extended, which integrates some functionality of <span class='mark'>STJsonPath</span>. So there is no dependency on <span class='mark'>STJsonPath</span> in the original <span class='mark'>STJson</span> code, <span class='mark'>STJson</span> can be used independently. But <span class='mark'>STJsonPath</span> is a helper class of <span class='mark'>STJson</span>, it needs to depend on <span class='mark'>STJson</span>.</p>
<div><h2 class='h_option anchor_point' name='a_y'>Selector</h2></div>
<div class='div_table'>
<table>
<tr><th>token</th><th>note</th></tr>
<tr><td>$</td><td>The root selector, which can be treated as representing the root object.</td></tr>
<tr class='tr_hight'><td>@</td><td>current element selector, which refers to the currently traversed element during traversal.</td></tr>
<tr><td>*</td><td>Wildcard, indicating that it can represent any node.</td></tr>
<tr class='tr_hight'><td>. &lt;name&gt;</td><td>Child node selector, specifying the <span class='mark'>key</span> of the child node.</td></tr>
<tr><td>... </td><td>depth selector, indicating that it can be any path.</td></tr>
<tr class='tr_hight'><td>['&lt;name&gt;'(,'&lt;name&gt;')]</td><td>List selector, specifying the set of <span class='mark'>key</span>s of the child nodes.</td></tr>
<tr><td>[&lt;number&gt;(,(number))]</td><td>List selector, specifies the set of <span class='mark'>index</span> of the child nodes.</td></tr>
<tr class='tr_hight'><td>[start:end:step]</td><td>Slice selector specifying the index interval.</td></tr>
<tr><td>[(&lt;expression&gt;)]</td><td>expression selector for entering an arithmetic expression and continuing down the index with the result.</td></tr>
<tr class='tr_hight'><td>[? (&lt;expression&gt;)]</td><td>expression selector, used to enter an arithmetic expression and convert the result to a boolean value to decide whether to continue the selection.</td></tr>
</table>
</div>
<div><h2 class='h_option anchor_point' name='a_z'>How to use</h2></div>
<p>An <span class='mark'>STJsonPath</span> can be constructed by:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>// var jp = new STJsonPath("$[0]name");
<span class='span_code_line'></span>// var jp = new STJsonPath("$[0].name");</span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> jp <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJsonPath</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"[0]'name'"</span><span style='color:rgba(255,255,255,1)'>);</span> <span style='color:rgba(0,255,0,1)'>// All of the above methods can be used, $ is not must.</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>jp<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<p>Of course <span class='mark'>STJsonPath</span> is already integrated in the extension functions in <span class='mark'>STJson</span> and can be used directly by the following:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>// var jp = new STJsonPath("[0].name");
<span class='span_code_line'></span>// Console.WriteLine(json_src.Select(jp));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"[0].name"</span><span style='color:rgba(255,255,255,1)'>));</span> <span style='color:rgba(0,255,0,1)'>// Internal dynamic construction of STJsonPath
<span class='span_code_line'></span>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<div class='div_hightlight' style='background-color:goldenrod;color:black'>
<p><span class='mark'>STJsonPath</span> returns data as an array, and its return value is <span class='mark'>STJson</span> instead of <span class='mark'>List&lt;STJson&gt;</span>, <span class='mark'>STJson</span> can also be an array object.</p>
<p>The beginning of <span class='mark'>$</span> is not required for <span class='mark'>STJsonPath</span> and the beginning <span class='mark'>$</span> or <span class='mark'>@</span> is removed internally, <span class='mark'>$</span><span class='mark'>@</span> is only used as a variable of the object in the expression.</p>
</div>
<div class='div_hightlight' style='background-color:pink;color:black'>
<p>The return value of a selector in an expression returns only the first result selected. This is not an array list, as will be explained later.</p>
</div>
<p>The use of <span class='mark'>'</span> or <span class='mark'>"</span> is allowed in <span class='mark'>STJsonPath</span>, for example: <span class='mark'>'a.b'</span> <span class='mark'>"a.b"</span> <span class='mark'>STJsonPath</span> will treat it as a separate entity. Instead of two. Listing such as <span class='mark'>Json</span> as follows:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span>{
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"a.b"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"this is a test"</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>}</span></pre>
</div>
<p>It is obvious that the data cannot be obtained by <span class='mark'>Select("a.b")</span>, you need to pass <span class='mark'>Select("'a.b'")</span>.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>string</span> strTemp <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>"{\"a.b\": \"this is a test\"}"</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_temp <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Deserialize</span><span style='color:rgba(255,255,255,1)'>(</span>strTemp<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_temp<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"a.b"</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_temp<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"'a.b'"</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[]
<span class='span_code_line'></span>[</span><span style='color:rgba(255,165,0,1)'>"this is a test"</span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<p>Support for <span class='mark'>\</span> in strings for escaping:<span class='mark'>\r</span><span class='mark'>\n</span><span class='mark'>\t</span><span class='mark'>\f</span><span class='mark'>\b</span><span class='mark'>\a</span><span class='mark'>\v</span><span class='mark'>\0</span><span class='mark'>\x..</span><span class='mark'>\u....</span><span class='mark'>\.</span></p>
<div><h2 class='h_option anchor_point' name='b_a'>Wildcard character</h2></div>
<p>Wildcards can represent any node of the current level. Gets the names of all people.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"*.name"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,255,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Tony"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Andy"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='b_b'>Depth selector</h2></div>
<p>Depth selectors are similar to wildcards, but depth selectors can be at any level.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"..name"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,255,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Tony"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Andy"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='b_c'>List selector</h2></div>
<p>List selectors support both <span class='mark'>int</span> and <span class='mark'>string</span>. Although two list selectors are listed in the table of <span class='mark'>selectors</span> above, there is only one list selector in <span class='mark'>STJsonPath</span>, and they can be mixed, for example, the following uses are both legal:</p>
<ul>
<li><span class='mark'>[0, 1, 2, 3]</span></li>
<li><span class='mark'>['key_1', 'key_2', key_3]</span></li>
<li><span class='mark'>[0, 'key_1', 1, 'key_2', 2, key_3]</span></li>
</ul>
<p><span class='mark'>STJsonPath</span> will automatically split into two list selectors internally and determine which list selector to use by judging <span class='mark'>STJsonValueType</span>. The internal implementation code is as follows:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>case</span> <span style='color:rgba(0,255,255,1)'>STJsonPathItem</span><span style='color:rgba(112,128,144,1)'>.ItemType.List</span><span style='color:rgba(255,255,255,1)'>:</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>jsonCurrent<span style='color:rgba(112,128,144,1)'>.ValueType</span> <span style='color:rgba(255,255,255,1)'>==</span> <span style='color:rgba(0,255,255,1)'>STJsonValueType</span><span style='color:rgba(112,128,144,1)'>.Object</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>foreach</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(100,149,237,1)'>var</span> v <span style='color:rgba(30,144,255,1)'>in</span> item<span style='color:rgba(112,128,144,1)'>.Keys</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>jsonCurrent<span style='color:rgba(255,255,255,1)'>[</span>v<span style='color:rgba(255,255,255,1)'>]</span> <span style='color:rgba(255,255,255,1)'>==</span> <span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>                <span style='color:rgba(30,144,255,1)'>continue</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>            }</span>
<span class='span_code_line'></span>            <span style='color:rgba(0,255,0,1)'>// ...</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>jsonCurrent<span style='color:rgba(112,128,144,1)'>.ValueType</span> <span style='color:rgba(255,255,255,1)'>==</span> <span style='color:rgba(0,255,255,1)'>STJsonValueType</span><span style='color:rgba(112,128,144,1)'>.Array</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>foreach</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(100,149,237,1)'>var</span> v <span style='color:rgba(30,144,255,1)'>in</span> item<span style='color:rgba(112,128,144,1)'>.Indices</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>            nIndexSliceL <span style='color:rgba(255,255,255,1)'>=</span> v<span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>nIndexSliceL <span style='color:rgba(255,255,255,1)'><</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>)</span> nIndexSliceL <span style='color:rgba(255,255,255,1)'>=</span> jsonCurrent<span style='color:rgba(112,128,144,1)'>.Count</span> <span style='color:rgba(255,255,255,1)'>+</span> nIndexSliceL<span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>nIndexSliceL <span style='color:rgba(255,255,255,1)'><</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(30,144,255,1)'>continue</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>nIndexSliceL <span style='color:rgba(255,255,255,1)'>>=</span> jsonCurrent<span style='color:rgba(112,128,144,1)'>.Count</span><span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(30,144,255,1)'>continue</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>            <span style='color:rgba(0,255,0,1)'>// ...</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>break</span><span style='color:rgba(255,255,255,1)'>;</span></pre>
</div>
<p>Selects the elements with index <span class='mark'>0</span> and <span class='mark'>2</span>.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"[0,2]"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"cooking"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"sing"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }, {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Andy"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>20</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"draw"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"sing"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>]</span></pre>
</div>
<p>Negative numbers can be used for <span class='mark'>int</span> indexes, e.g. <span class='mark'>-1</span> means get the last element. When <span class='mark'>STJsonPath</span> detects a negative number it will execute <span class='mark'>STJson.Count - n</span> to use the result as index.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>//Console.WriteLine(json_src.Select("-1").ToString(4));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"[-1]"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>26</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"sing"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"dance"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"rap"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"basketball"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>]</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='b_d'>Slice selector</h2></div>
<p>The slice selector is used to select a fragment in an array. The default value of the slice selector is <span class='mark'>[0:-1:1]</span>, which is implemented inside the slice selector as follows:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>case</span> <span style='color:rgba(0,255,255,1)'>STJsonPathItem</span><span style='color:rgba(112,128,144,1)'>.ItemType.Slice</span><span style='color:rgba(255,255,255,1)'>:</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>jsonCurrent<span style='color:rgba(112,128,144,1)'>.ValueType</span> <span style='color:rgba(255,255,255,1)'>!=</span> <span style='color:rgba(0,255,255,1)'>STJsonValueType</span><span style='color:rgba(112,128,144,1)'>.Array</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>return</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>nIndexSliceL <span style='color:rgba(255,255,255,1)'><</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>)</span> nIndexSliceL <span style='color:rgba(255,255,255,1)'>=</span> jsonCurrent<span style='color:rgba(112,128,144,1)'>.Count</span> <span style='color:rgba(255,255,255,1)'>+</span> nIndexSliceL<span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>nIndexSliceR <span style='color:rgba(255,255,255,1)'><</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>)</span> nIndexSliceR <span style='color:rgba(255,255,255,1)'>=</span> jsonCurrent<span style='color:rgba(112,128,144,1)'>.Count</span> <span style='color:rgba(255,255,255,1)'>+</span> nIndexSliceR<span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>nIndexSliceL <span style='color:rgba(255,255,255,1)'><</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>)</span> nIndexSliceL <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>else if</span> <span style='color:rgba(255,255,255,1)'>(</span>nIndexSliceL <span style='color:rgba(255,255,255,1)'>>=</span> jsonCurrent<span style='color:rgba(112,128,144,1)'>.Count</span><span style='color:rgba(255,255,255,1)'>)</span> nIndexSliceL <span style='color:rgba(255,255,255,1)'>=</span> jsonCurrent<span style='color:rgba(112,128,144,1)'>.Count</span> <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>nIndexSliceR <span style='color:rgba(255,255,255,1)'><</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>)</span> nIndexSliceR <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>else if</span> <span style='color:rgba(255,255,255,1)'>(</span>nIndexSliceR <span style='color:rgba(255,255,255,1)'>>=</span> jsonCurrent<span style='color:rgba(112,128,144,1)'>.Count</span><span style='color:rgba(255,255,255,1)'>)</span> nIndexSliceR <span style='color:rgba(255,255,255,1)'>=</span> jsonCurrent<span style='color:rgba(112,128,144,1)'>.Count</span> <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>nIndexSliceL <span style='color:rgba(255,255,255,1)'>></span> nIndexSliceR<span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>for</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(100,149,237,1)'>int</span> i <span style='color:rgba(255,255,255,1)'>=</span> nIndexSliceL<span style='color:rgba(255,255,255,1)'>;</span> i <span style='color:rgba(255,255,255,1)'>>=</span> nIndexSliceR<span style='color:rgba(255,255,255,1)'>;</span> i <span style='color:rgba(255,255,255,1)'>-=</span> item<span style='color:rgba(112,128,144,1)'>.Step</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>            <span style='color:rgba(0,255,0,1)'>// ...</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    }</span> <span style='color:rgba(30,144,255,1)'>else</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>for</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(100,149,237,1)'>int</span> i <span style='color:rgba(255,255,255,1)'>=</span> nIndexSliceL<span style='color:rgba(255,255,255,1)'>;</span> i <span style='color:rgba(255,255,255,1)'><=</span> nIndexSliceR<span style='color:rgba(255,255,255,1)'>;</span> i <span style='color:rgba(255,255,255,1)'>+=</span> item<span style='color:rgba(112,128,144,1)'>.Step</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>            <span style='color:rgba(0,255,0,1)'>// ...</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>break</span><span style='color:rgba(255,255,255,1)'>;</span></pre>
</div>
<p>So the three values in the slice are equivalent to the three conditions in the <span class='mark'>for</span> loop, so the principle and effect will not be explained.</p>
<div class='div_table'>
<table>
<tr><th>expression</th><th>range</th><th>note</th></tr>
<tr><td>[::]</td><td>0 &lt;= R &lt;= (OBJ).length - 1</td><td>equivalent to <span class='mark'>*</span>.</td></tr>
<tr class='tr_hight'><td>[5:]</td><td>5 &lt;= R &lt;= {OBJ}.length - 1</td><td>Gets all elements starting with the <span class='mark'>6th</span> element.</td></tr>
<tr><td>[-1:0]</td><td>{OBJ}.length - 1 &gt;= R &gt;= 0</td><td>Get the data in reverse order.</td></tr>
<tr class='tr_hight'><td>[0::2]</td><td>0 &lt;= R &lt;= {OBJ}.length - 1</td><td>Fetch data in order and one data interval apart.</td></tr>
</table>
</div>
<div class='div_hightlight' style='background-color:goldenrod;color:black'>
<p>At least one <span class='mark'>:</span> appears in the slice selector and <span class='mark'>step</span> is greater than 0, otherwise it will get an exception.</p>
</div>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"[-1:]"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>26</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"sing"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"dance"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"rap"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"basketball"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>]</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='b_e'>Expression</h2></div>
<p>The following operators can be supported in <span class='mark'>[?()]</span>, with increasing priority from top to bottom.</p>
<hr/>
<ul>
<li><span class='mark'>&amp;&amp;</span> <span class='mark'>||</span></li>
<li><span class='mark'>&lt;</span> <span class='mark'>&lt;=</span> <span class='mark'>&gt;</span> <span class='mark'>&gt;=</span> <span class='mark'>==</span> <span class='mark'>!=</span> <span class='mark'>re</span></li>
<li><span class='mark'>&amp;</span> <span class='mark'>|</span> <span class='mark'>&lt;&lt;</span> <span class='mark'>&gt;&gt;</span> <span class='mark'>^</span> <span class='mark'>~</span></li>
<li><span class='mark'>+</span> <span class='mark'>-</span></li>
<li><span class='mark'>*</span> <span class='mark'>/</span> <span class='mark'>%</span></li>
<li><span class='mark'>in</span> <span class='mark'>nin</span> <span class='mark'>anyof</span></li>
<li><span class='mark'>!</span></li>
</ul>
<div class='div_table'>
<table>
<tr><th>operator</th><th>note</th><th>e.g</th></tr>
<tr><td>re</td><td>Regular expressions. </td><td>[?(@.name re 'un')]</td></tr>
<tr class='tr_hight'><td>in</td><td>The left value or array is contained in the right array. </td><td>[?(@.age in [16,20])]</td></tr>
<tr><td>nin</td><td>The value or array on the left is not contained in the array on the right. </td><td>[?(@.hobby nin ['sing','draw'])]</td></tr>
<tr class='tr_hight'><td>anyof</td><td>The intersection of the value or array on the left and the array on the right exists. </td><td>[?(@.hobby anyof ['sing','draw'])]</td></tr>
</table>
</div>
<p>Expressions have two modes:</p>
<ul>
<li><span class='mark'>[[? (&lt;expression&gt;)</span> - Filter expression that computes a boolean value and determines whether to continue the match.</li>
<li><span class='mark'>[(&lt;expression&gt;)</span> - A general expression that computes a value and continues the match with the value as an index.</li>
</ul>
<div><h2 class='h_option anchor_point' name='b_f'>Filter expression</h2></div>
<p>Check the elements of <span class='mark'>name</span> that contain the letters <span class='mark'>ku</span>:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>//Console.WriteLine(json_src.Select("*.[?(@.name == 'kun')]").ToString(4));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"*.[?(@.name re '(?i)ku')]"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>26</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"sing"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"dance"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"rap"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"basketball"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>]</span></pre>
</div>
<p>The <span class='mark'>i</span> in <span class='mark'>(?i)</span> means case is ignored, and its regular expression is based on the <span class='mark'>Regex</span> in <span class='mark'>. </span>(?...) <span class='mark'> starts with </span>(?...)` to set the matching pattern. As for the matching pattern, please check the related information by yourself.</p>
<p>Check the elements of <span class='mark'>hobby</span> that do not contain <span class='mark'>sing</span> and <span class='mark'>swing</span>:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"*.[?(@.hobby nin ['sing','draw'])]"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tony"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"game"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"dance"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>]</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='b_g'>General expression</h2></div>
<p>The general expression will continue matching the result as part of <span class='mark'>STJsonPath</span>.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"*.[('na' + 'me')]"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,255,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Tony"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Andy"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<p>In <span class='mark'>[('na' + 'me')]</span> the result of <span class='mark'>'na' + 'me'</span> is <span class='mark'>'name'</span> and will use this value as an index, so the above effect is equivalent to <span class='mark'>*.name</span>, but of course the return value can also be a collection.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"*.[(['na' + 'me', 'age', 0, 1 + 1])]"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,255,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Tony"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Andy"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>20</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>26</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<p>The result of the above expression settles on the value <span class='mark'>['name', 'age', 0, 2]</span>. But obviously <span class='mark'>0</span> and <span class='mark'>2</span> will not do anything, because the second level data object is not an array.</p>
<p>The above expression is equivalent to <span class='mark'>*. ['name', 'age', 0, 2]</span>. If you replace the above with the third level you will get the following result.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"*.*.[(['na' + 'me', 'age', 0, 1 + 1])]"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,255,1)'>"cooking"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"game"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"draw"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"sing"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"rap"</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<p>You can see that <span class='mark'>'name'</span> and <span class='mark'>'age'</span> are not valid for <span class='mark'>hobby</span> because <span class='mark'>hobby</span> is an array.</p>
<div><h2 class='h_option anchor_point' name='b_h'>Test expression</h2></div>
<p>The author provides a static test function <span class='mark'>TestExpression()</span> that can be used to debug the expression. If there is something you don't understand, test it and you will see the process and the result.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>STJsonPath</span><span style='color:rgba(219,112,147,1)'>.TestExpression</span><span style='color:rgba(255,255,255,1)'>(</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>,</span>           <span style='color:rgba(0,255,0,1)'>// [STJson] is used to replace the $ that appears in the expression.</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>,</span>           <span style='color:rgba(0,255,0,1)'>// [STJson] is used to replace the @ that appears in the expression.</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"1+2+3"</span>         <span style='color:rgba(0,255,0,1)'>// Expression text.</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"expression"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"{1 + 2 + 3}"</span><span style='color:rgba(255,255,255,1)'>,</span>        <span style='color:rgba(0,255,0,1)'>// The formatted text {} means that this part needs to be executed separately e.g. [1, {1+1}, 3].</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"polish"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"1"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"2"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>" + "</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"3"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>" + "</span> <span style='color:rgba(0,255,0,1)'>// Inverse Polish expressions.</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"steps"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>                      <span style='color:rgba(0,255,0,1)'>// The excute steps</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"excute"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"operator"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"+"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"get_left_token"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>     <span style='color:rgba(0,255,0,1)'>// Computes the value of the element to the left of the operator, the left side of the expression may also be an expression.</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"1"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"result"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"value_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Long"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"text"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"1"</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>            },</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"get_right_token"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"2"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"result"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"value_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Long"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"text"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"2"</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>            },</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"result"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>             <span style='color:rgba(0,255,0,1)'>// The result of this step execution.</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"value_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Long"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"text"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"3"</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>        }, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"excute"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"operator"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"+"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"get_left_token"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>     <span style='color:rgba(0,255,0,1)'>// In this case, the element to the left of the operator is the result of the calculation of the previous step.</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"3"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"result"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"value_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Long"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"text"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"3"</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>            },</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"get_right_token"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"3"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"result"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"value_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Long"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"text"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"3"</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>            },</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"result"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"value_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Long"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"text"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"6"</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>        }
<span class='span_code_line'></span>    ],</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"check_result"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>               <span style='color:rgba(0,255,0,1)'>// Clears the Polish expression data stack and determines the final output.</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"6"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"result"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Long"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"text"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"6"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    },</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"return"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>                     <span style='color:rgba(0,255,0,1)'>// The final return value.</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"value_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Long"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"text"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"6"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"bool"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(30,144,255,1)'>true</span>                <span style='color:rgba(0,255,0,1)'>// Converts to true if used as a Boolean expression.</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>}</span></pre>
</div>
<p>If the process is not important and you simply want to see the results of the execution.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>STJsonPath</span><span style='color:rgba(219,112,147,1)'>.TestExpression</span><span style='color:rgba(255,255,255,1)'>(</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>,</span>           <span style='color:rgba(0,255,0,1)'>// [STJson] is used to replace the $ that appears in the expression.</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>,</span>           <span style='color:rgba(0,255,0,1)'>// [STJson] is used to replace the @ that appears in the expression.</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"1+2+3"</span>         <span style='color:rgba(0,255,0,1)'>// Expression text.</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.SelectFirst</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"return"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"return"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>                     <span style='color:rgba(0,255,0,1)'>// The final return value.</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"value_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Long"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"text"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"6"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"bool"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(30,144,255,1)'>true</span>                <span style='color:rgba(0,255,0,1)'>// // Converts to true if used as a Boolean expression.</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>}</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='b_i'>Build-In functions</h2></div>
<div class='div_table'>
<table>
<tr><th>return</th><th>signature</th><th>note</th></tr>
<tr><td>string</td><td>typeof(object)</td><td>Get the data type.</td></tr>
<tr class='tr_hight'><td>string</td><td>str(object)</td><td>Convert to string.</td></tr>
<tr><td>string</td><td>upper(string)</td><td>Convert to uppercase.</td></tr>
<tr class='tr_hight'><td>string</td><td>lower(string)</td><td>Convert to lowercase.</td></tr>
<tr><td>long</td><td>len(string or array)</td><td>Get the length of a string or an array.</td></tr>
<tr class='tr_hight'><td>long</td><td>long(string or number)</td><td>Convert to integer.</td></tr>
<tr><td>double</td><td>double(string or number)</td><td>Convert to double.</td></tr>
<tr class='tr_hight'><td>number</td><td>abs(number)</td><td>Get the absolute value.</td></tr>
<tr><td>long</td><td>round(number)</td><td>Round up to round down.</td></tr>
<tr class='tr_hight'><td>long</td><td>ceil(number)</td><td>Round up.</td></tr>
<tr><td>long or double</td><td>max(array)</td><td>Get the maximum value.</td></tr>
<tr class='tr_hight'><td>long or double</td><td>min(array)</td><td>Get the minimum value.</td></tr>
<tr><td>long or double</td><td>avg(array)</td><td>Get the average.</td></tr>
<tr class='tr_hight'><td>long or double</td><td>sum(array)</td><td>Get the summary.</td></tr>
<tr><td>string</td><td>trim(string)</td><td>Crop the specified characters at both ends of the string.</td></tr>
<tr class='tr_hight'><td>string</td><td>trims(string)</td><td>Cuts the character at the beginning of the string.</td></tr>
<tr><td>string</td><td>trime(string)</td><td>Cuts the character at the end of the string.</td></tr>
<tr class='tr_hight'><td>string_array</td><td>split(+1)</td><td>split the string.</td></tr>
<tr><td>long or string</td><td>time(+n)</td><td>Get or format the timestamp.</td></tr>
</table>
</div>
<p><span class='mark'>typeof</span> has the following return values:</p>
<p><span class='mark'>string</span> <span class='mark'>long</span> <span class='mark'>double</span> <span class='mark'>boolean</span> <span class='mark'>array</span> <span class='mark'>object</span> <span class='mark'>undefined</span></p>
<div><h2 class='h_option anchor_point' name='b_j'>Build-In functions list</h2></div>
<p>As the version is iteratively updated (if possible), the built-in functions may change at any time. The <span class='mark'>GetBuildInFunctionList()</span> allows you to view information about the built-in functions supported by the current version.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>STJsonPath</span><span style='color:rgba(219,112,147,1)'>.GetBuildInFunctionList</span><span style='color:rgba(255,255,255,1)'>()</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"typeof"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"demos"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"(object) -> typeof('abc')"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    },</span>
<span class='span_code_line'></span>    ...
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<p>The reader can test the function by following <span class='mark'>demos</span> with <span class='mark'>TestExpression()</span>.</p>
<p>Select elements whose <span class='mark'>hobby</span> length is greater than <span class='mark'>2</span>:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"..[?(len(@.hobby) > 1 + 1)]"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>26</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"sing"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"dance"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"rap"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"basketball"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>]</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='b_k'>Custom functions</h2></div>
<p>When providing built-in functions for expressions, the authors didn't know what kind of functions the developers expected, so they built a few and then just left them alone. There is no problem that can't be solved by writing code, yes. Let the developers write their own. But how do developers provide functions for <span class='mark'>STJsonPath</span>?</p>
<p><span class='mark'>STJsonPath.CustomFunctions</span> is a static dictionary. It is used to hold developer-defined functions. Its function signatures are as follows:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>public</span> <span style='color:rgba(0,255,255,1)'>delegate STJson</span> <span style='color:rgba(255,0,255,1)'>STJsonPathCustomFuncHander</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>STJsonPathExpFuncArg</span><span style='color:rgba(255,255,255,1)'>[]</span> args<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>public struct</span> <span style='color:rgba(0,255,255,1)'>STJsonPathExpFuncArg</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public</span> <span style='color:rgba(0,255,255,1)'>STJsonPathExpFuncArgType</span> Type<span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>public</span> <span style='color:rgba(100,149,237,1)'>object</span> Value<span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>}</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>public enum</span> <span style='color:rgba(0,255,255,1)'>STJsonPathExpFuncArgType</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    Undefined<span style='color:rgba(255,255,255,1)'>,</span> Number<span style='color:rgba(255,255,255,1)'>,</span> String<span style='color:rgba(255,255,255,1)'>,</span> Boolean<span style='color:rgba(255,255,255,1)'>,</span> Array<span style='color:rgba(255,255,255,1)'>,</span> Object<span style='color:rgba(255,255,255,1)'>,
<span class='span_code_line'></span>}</span></pre>
</div>
<p>The return value of the custom function is unified with <span class='mark'>STJson</span>, because <span class='mark'>STJson</span> can interface perfectly with <span class='mark'>STJsonPath</span>, where <span class='mark'>STJsonPath</span> can operate directly on the return value of the custom function using <span class='mark'>selector</span>. For example, the following example adds a <span class='mark'>matches</span> function to <span class='mark'>STJsonPath</span> for regular expression manipulation.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>STJsonPath</span><span style='color:rgba(112,128,144,1)'>.CustomFunctions</span><span style='color:rgba(219,112,147,1)'>.Add</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"matches"</span><span style='color:rgba(255,255,255,1)'>, (</span>objs<span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(255,255,255,1)'>=></span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(100,149,237,1)'>var</span> json_ret <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>();</span>
<span class='span_code_line'></span>    json_ret<span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>    json_ret<span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"values"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.CreateArray</span><span style='color:rgba(255,255,255,1)'>());</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>objs<span style='color:rgba(112,128,144,1)'>.Length</span> <span style='color:rgba(255,255,255,1)'>!=</span> <span style='color:rgba(144,238,144,1)'>2</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>return</span> json_ret<span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>    <span style='color:rgba(100,149,237,1)'>var</span> ms <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>Regex</span><span style='color:rgba(219,112,147,1)'>.Matches</span><span style='color:rgba(255,255,255,1)'>(</span>objs<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(112,128,144,1)'>.Value</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(),</span> objs<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(112,128,144,1)'>.Value</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>());</span>
<span class='span_code_line'></span>    json_ret<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(219,112,147,1)'>.SetValue</span><span style='color:rgba(255,255,255,1)'>(</span>ms<span style='color:rgba(112,128,144,1)'>.Count</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>foreach</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>Match</span> v <span style='color:rgba(30,144,255,1)'>in</span> ms<span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        json_ret<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"values"</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(219,112,147,1)'>.Append</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.FromObject</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            success <span style='color:rgba(255,255,255,1)'>=</span> v<span style='color:rgba(112,128,144,1)'>.Success</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            index <span style='color:rgba(255,255,255,1)'>=</span> v<span style='color:rgba(112,128,144,1)'>.Index</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            length <span style='color:rgba(255,255,255,1)'>=</span> v<span style='color:rgba(112,128,144,1)'>.Length</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>value</span> <span style='color:rgba(255,255,255,1)'>=</span> v<span style='color:rgba(112,128,144,1)'>.Value</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}));
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>return</span> json_ret<span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>});</span></pre>
</div>
<p>Then we need to filter out the elements of <span class='mark'>hobby</span> that contain two <span class='mark'>a</span>s or <span class='mark'>o</span>s:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"*.hobby.*[?(matches(@,'a|o').count == 2)]"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,255,1)'>"cooking"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"basketball"</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<div class='div_hightlight' style='background-color:pink;color:black'>
<p>The <span class='mark'>custom function</span> takes precedence over the <span class='mark'>built-in function</span>, that is, if there is a function with the same name in the <span class='mark'>custom function</span> and the <span class='mark'>built-in function</span>, the <span class='mark'>custom function</span> is called first.</p>
</div>
<div><h2 class='h_option anchor_point' name='b_l'>Selectors in expressions</h2></div>
<p>A selector in an expression returns only the first result selected, not a list of arrays.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>STJsonPath</span><span style='color:rgba(219,112,147,1)'>.TestExpression</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>],</span> json_src<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>],</span> <span style='color:rgba(255,165,0,1)'>"@.name"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"Tom"</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"expression"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"{[@]['name']}"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"polish"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"[@]['name']"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"steps"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>
<span class='span_code_line'></span>    ],</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"check_result"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"[@]['name']"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"selector"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"root_json"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"{\"name\":\"Tom\",\"age\":16,\"gender\":0,\"hobby\":[\"cooking\",\"sing\"]}"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"current_json"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"{\"name\":\"Tom\",\"age\":16,\"gender\":0,\"hobby\":[\"cooking\",\"sing\"]}"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"selected_json"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"[\"Tom\"]"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"result"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>                     <span style='color:rgba(0,255,0,1)'>// The return value will get only the first result.</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"String"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"text"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    },</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"return"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"bool"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"value_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"String"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"text"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>}</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='b_m'>Select mode</h2></div>
<p>Normal mode (default):</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"..name"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(0,255,255,1)'>STJsonPathSelectMode</span><span style='color:rgba(112,128,144,1)'>.ItemOnly</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,255,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Tony"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Andy"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<p>Path mode：</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"..name"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(0,255,255,1)'>STJsonPathSelectMode</span><span style='color:rgba(112,128,144,1)'>.ItemWithPath</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"path"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"name"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"item"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"path"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"name"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"item"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tony"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"path"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(144,238,144,1)'>2</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"name"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"item"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Andy"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"path"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(144,238,144,1)'>3</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"name"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"item"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>]</span></pre>
</div>
<p>Structure mode：</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"..name"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(0,255,255,1)'>STJsonPathSelectMode</span><span style='color:rgba(112,128,144,1)'>.KeepStructure</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tony"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Andy"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>]</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='b_n'>ParsedTokens</h2></div>
<p><span class='mark'>GetParsedTokens()</span> is used to get how the current <span class='mark'>STJsonPath</span> string is parsed internally and output as <span class='mark'>STJson</span>. If you want to write a parser too, it might give you some ideas.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJsonPath</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"$..[?(matches(@.name,'u').count == 1)]"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.GetParsedTokens</span><span style='color:rgba(255,255,255,1)'>()</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>2</span><span style='color:rgba(255,255,255,1)'>)
<span class='span_code_line'></span>    );</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>  <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"entry"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>  <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"[..]{matches({[@]['name']}, {'u'}) == 1}"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>  <span style='color:rgba(255,165,0,1)'>"items"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>      <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"selector_item"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>      <span style='color:rgba(255,165,0,1)'>"item_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Depth"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>      <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>".."</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>      <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"expression"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>      <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"{matches({[@]['name']}, {'u'}) == 1}"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>      <span style='color:rgba(255,165,0,1)'>"items"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>        {</span>
<span class='span_code_line'></span>          <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"function"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>          <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"matches({[@]['name']}, {'u'})"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>          <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"matches"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>          <span style='color:rgba(255,165,0,1)'>"args"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"({[@]['name']}, {'u'})"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"items"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>              {</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"expression"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"{[@]['name']}"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"items"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>                  {</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"expression_item"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"item_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"selector"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"items"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>                      {</span>
<span class='span_code_line'></span>                        <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"selector_item"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                        <span style='color:rgba(255,165,0,1)'>"item_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Current"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                        <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"@"</span>
<span class='span_code_line'></span>                      <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>                        <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"selector_item"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                        <span style='color:rgba(255,165,0,1)'>"item_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"List"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                        <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>                          <span style='color:rgba(255,165,0,1)'>"name"</span>
<span class='span_code_line'></span>                        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>                      }
<span class='span_code_line'></span>                    ]
<span class='span_code_line'></span>                  }
<span class='span_code_line'></span>                ]
<span class='span_code_line'></span>              }, {</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"expression"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"{'u'}"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"items"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>                  {</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"expression_item"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"item_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"string"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"u"</span>
<span class='span_code_line'></span>                  <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>                ]
<span class='span_code_line'></span>              }
<span class='span_code_line'></span>            ]
<span class='span_code_line'></span>          },</span>
<span class='span_code_line'></span>          <span style='color:rgba(255,165,0,1)'>"selector"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"parsed"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"['count']"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"items"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>              {</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"selector_item"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"item_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"List"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>                  <span style='color:rgba(255,165,0,1)'>"count"</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>              }
<span class='span_code_line'></span>            ]
<span class='span_code_line'></span>          }
<span class='span_code_line'></span>        }, {</span>
<span class='span_code_line'></span>          <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"expression_item"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>          <span style='color:rgba(255,165,0,1)'>"item_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"long"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>          <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>          <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"expression_item"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>          <span style='color:rgba(255,165,0,1)'>"item_type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"operator"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>          <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"=="</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>      ]
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>  ]
<span class='span_code_line'></span>}</span></pre>
</div>
<h1 class='h_title anchor_point' name='b_o'>STJson [Advanced]</h1>
<div><h2 class='h_option anchor_point' name='b_p'>Get value</h2></div>
<p>Imagine a scenario where, as a <span class='mark'>WEB</span> back-end service, we need to process <span class='mark'>Json</span> data submitted by the front-end, assuming we expect the following <span class='mark'>Json</span> data:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span>{
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"get_list"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"page"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"from"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>100</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"size"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>10</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>},</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"other"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{}
<span class='span_code_line'></span>}</span></pre>
</div>
<p>And we have converted the above data into <span class='mark'>STJson</span> and named it <span class='mark'>json_post</span>. Where <span class='mark'>from</span> and <span class='mark'>size</span> are used for page-flipping function. Then the backend may make the following judgments:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>if</span><span style='color:rgba(255,255,255,1)'>(</span>json_post<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"page"</span><span style='color:rgba(255,255,255,1)'>]</span> <span style='color:rgba(255,255,255,1)'>==</span> <span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>) {</span> <span style='color:rgba(0,255,0,1)'>/* do something */</span> <span style='color:rgba(255,255,255,1)'>}</span>
<span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>if</span><span style='color:rgba(255,255,255,1)'>(</span>json_post<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"page"</span><span style='color:rgba(255,255,255,1)'>][</span><span style='color:rgba(255,165,0,1)'>"from"</span><span style='color:rgba(255,255,255,1)'>]</span> <span style='color:rgba(255,255,255,1)'>==</span> <span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>) {</span> <span style='color:rgba(0,255,0,1)'>/* do something */</span> <span style='color:rgba(255,255,255,1)'>}</span>
<span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>if</span><span style='color:rgba(255,255,255,1)'>(</span>json_post<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"page"</span><span style='color:rgba(255,255,255,1)'>][</span><span style='color:rgba(255,165,0,1)'>"from"</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(112,128,144,1)'>.ValueType</span> <span style='color:rgba(255,255,255,1)'>!=</span> <span style='color:rgba(0,255,255,1)'>STJsonValueType</span><span style='color:rgba(112,128,144,1)'>.Long</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,0,1)'>/* do something */</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>}</span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>int</span> nFrom <span style='color:rgba(255,255,255,1)'>=</span> json_post<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"page"</span><span style='color:rgba(255,255,255,1)'>][</span><span style='color:rgba(255,165,0,1)'>"from"</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(100,149,237,1)'>int</span>><span style='color:rgba(255,255,255,1)'>();</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>// Or just be rude.</span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>int</span> nFrom <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>try</span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    nFrom <span style='color:rgba(255,255,255,1)'>=</span> json_post<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"page"</span><span style='color:rgba(255,255,255,1)'>][</span><span style='color:rgba(255,165,0,1)'>"from"</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(100,149,237,1)'>int</span>><span style='color:rgba(255,255,255,1)'>();
<span class='span_code_line'></span>}</span><span style='color:rgba(30,144,255,1)'>catch</span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,0,1)'>/* do something */</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>}</span></pre>
</div>
<p>Obviously the above code is driving you crazy. Of course, you can create an entity object for it in the backend code to reduce the hassle, and then bind <span class='mark'>Json</span> to the entity object. But creating an entity object for each <span class='mark'>Post</span> data type is also quite annoying. But if you use the following code.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>int</span> nFrom <span style='color:rgba(255,255,255,1)'>=</span> json_post<span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(100,149,237,1)'>int</span>><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"page.from"</span><span style='color:rgba(255,255,255,1)'>);</span></pre>
</div>
<p>Maybe you are wondering, what if the path does not exist or <span class='mark'>from</span> is not a number at all?emm.... The above code will still report an error, because the internal call to the above code is:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>public static</span> <span style='color:rgba(0,255,255,1)'>T</span> <span style='color:rgba(255,0,255,1)'>GetValue</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(0,255,255,1)'>T</span>><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>this</span> STJson <span style='color:rgba(0,255,255,1)'>json</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(100,149,237,1)'>string</span> strJsonPath<span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>return</span> json<span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(0,255,255,1)'>T</span>><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJsonPath</span><span style='color:rgba(255,255,255,1)'>(</span>strJsonPath<span style='color:rgba(255,255,255,1)'>));
<span class='span_code_line'></span>}</span>
<span class='span_code_line'></span>
<span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>public static</span> <span style='color:rgba(0,255,255,1)'>T</span> <span style='color:rgba(255,0,255,1)'>GetValue</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(0,255,255,1)'>T</span>><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>this</span> STJson <span style='color:rgba(0,255,255,1)'>json</span><span style='color:rgba(255,255,255,1)'>,</span> STJsonPath jsonPath<span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>    <span style='color:rgba(100,149,237,1)'>var</span> j <span style='color:rgba(255,255,255,1)'>=</span> jsonPath<span style='color:rgba(219,112,147,1)'>.SelectFirst</span><span style='color:rgba(255,255,255,1)'>(</span>json<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>j <span style='color:rgba(255,255,255,1)'>==</span> <span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>throw new</span> <span style='color:rgba(0,255,255,1)'>STJsonPathException</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"Can not selected a object with path {"</span> <span style='color:rgba(255,255,255,1)'>+</span> jsonPath<span style='color:rgba(112,128,144,1)'>.SourceText</span> <span style='color:rgba(255,255,255,1)'>+</span> <span style='color:rgba(255,165,0,1)'>"}"</span><span style='color:rgba(255,255,255,1)'>);
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>    <span style='color:rgba(100,149,237,1)'>var</span> t <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(100,149,237,1)'>typeof</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>T</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>    <span style='color:rgba(100,149,237,1)'>bool</span> bProcessed <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>    <span style='color:rgba(100,149,237,1)'>var</span> convert <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJsonBuildInConverter</span><span style='color:rgba(219,112,147,1)'>.Get</span><span style='color:rgba(255,255,255,1)'>(</span>t<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>convert <span style='color:rgba(255,255,255,1)'>!=</span> <span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>        <span style='color:rgba(100,149,237,1)'>var</span> value <span style='color:rgba(255,255,255,1)'>=</span> convert<span style='color:rgba(219,112,147,1)'>.JsonToObject</span><span style='color:rgba(255,255,255,1)'>(</span>t<span style='color:rgba(255,255,255,1)'>,</span> json<span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>ref</span> bProcessed<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>bProcessed<span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>return</span> <span style='color:rgba(255,255,255,1)'>(</span>T<span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(30,144,255,1)'>value</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>        }
<span class='span_code_line'></span>    }</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>return</span> <span style='color:rgba(255,255,255,1)'>(</span>T<span style='color:rgba(255,255,255,1)'>)</span>j<span style='color:rgba(112,128,144,1)'>.Value</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>}</span></pre>
</div>
<p>Because when there is no element, do not know what value needs to be returned, the reader may think that it is impossible to get the value, return a default value is good, indeed, can be so designed, but the caller how to determine the value returned is the real value or the default value. There is no way to determine if it is an exception. Unless a default value is forced to be specified.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>int</span> nFrom <span style='color:rgba(255,255,255,1)'>=</span> json_post<span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(100,149,237,1)'>int</span>><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"page.from"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>);</span></pre>
</div>
<p>Returns the element value if the element exists and can be converted properly, otherwise returns <span class='mark'>0</span>.</p>
<p>Or to know if the real value is returned:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>int</span> nFrom <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> bFlag <span style='color:rgba(255,255,255,1)'>=</span> json_src<span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'><</span><span style='color:rgba(100,149,237,1)'>int</span>><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"page.from"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>out</span> nFrom<span style='color:rgba(255,255,255,1)'>);</span></pre>
</div>
<div class='div_hightlight' style='background-color:goldenrod;color:black'>
<p>If the filled <span class='mark'>strJsonPath</span> will get more than one value, the first value is taken.</p>
</div>
<div><h2 class='h_option anchor_point' name='b_q'>Set value</h2></div>
<p>If we need to construct a <span class='mark'>Json</span> manually we can add elements via <span class='mark'>STJson.SetItem()</span>. However, some scenarios seem a bit tricky to use this way, for example, take the <span class='mark'>query</span> syntax of the <span class='mark'>ElasticSearch</span> database as an example. We need to construct a data as follows:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span>{
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"query"</span><span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"term"</span><span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"field_name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"field_value"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>}</span></pre>
</div>
<p>Then we need to construct an <span class='mark'>STJson</span> object as in the previous case like this:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>()</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"query"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>()</span>
<span class='span_code_line'></span>        <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"term"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>()</span>
<span class='span_code_line'></span>            <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"field_name"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"field_value"</span><span style='color:rgba(255,255,255,1)'>))
<span class='span_code_line'></span>        );</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>// or</span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.FromObject</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    query <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        term <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            field_name <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>"field_value"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>});</span></pre>
</div>
<p>But it is also possible to write the code like this:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>()</span><span style='color:rgba(219,112,147,1)'>.Set</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"query.term.field_name"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"field_value"</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json<span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"query"</span><span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"term"</span><span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"field_name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"field_value"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>}</span></pre>
</div>
<p>Or even this:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>()</span><span style='color:rgba(219,112,147,1)'>.Set</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"array[0:4].[key_1,key_2]"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json<span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"array"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>        {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"key_1"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"key_2"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"key_1"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"key_2"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"key_1"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"key_2"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"key_1"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"key_2"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"key_1"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"key_2"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"value"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    ]
<span class='span_code_line'></span>}</span></pre>
</div>
<div class='div_hightlight' style='background-color:pink;color:black'>
<p>Only <span class='mark'>list selector</span> and <span class='mark'>slice selector</span> are supported in <span class='mark'>Set</span>. No other selectors are supported.</p>
</div>
<div><h2 class='h_option anchor_point' name='b_r'>STJsonCreator</h2></div>
<p>Although it is easy to construct a <span class='mark'>Json</span> data by <span class='mark'>Set</span> above, it is also possible to do it by <span class='mark'>Set</span> for multi-layer nested data structure, but the code will become too complicated and it is not possible to visualize the structure of <span class='mark'>Json</span> data. <span class='mark'>STJsonCreator</span> is similar to <span class='mark'>STJsonWriter</span>, but <span class='mark'>STJsonCreator</span> creates an <span class='mark'>STJson</span> object directly, which is usually used to create complex <span class='mark'>Json</span> objects. Still using the <span class='mark'>ElasticSearch</span> database as an example to simulate a data retrieval.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> str_json_post <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>@"
<span class='span_code_line'></span>{
<span class='span_code_line'></span>    type: 'student',
<span class='span_code_line'></span>    names: ['DebugST', 'None'],
<span class='span_code_line'></span>}"</span><span style='color:rgba(255,255,255,1)'>;</span>                                         <span style='color:rgba(0,255,0,1)'>// The web post data.</span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_post <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Deserialize</span><span style='color:rgba(255,255,255,1)'>(</span>str_json_post<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_es_query <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.Create</span><span style='color:rgba(255,255,255,1)'>((</span>c<span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(255,255,255,1)'>=></span>    <span style='color:rgba(0,255,0,1)'>// Create ES query json.</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    c
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"from"</span><span style='color:rgba(255,255,255,1)'>, (</span>json_post<span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"page"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(255,255,255,1)'>-</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(255,255,255,1)'>*</span> json_post<span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"size"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>))</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"size"</span><span style='color:rgba(255,255,255,1)'>,</span> json_post<span style='color:rgba(219,112,147,1)'>.GetValue</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"size"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>))</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.Set</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"query.bool"</span><span style='color:rgba(255,255,255,1)'>, ()</span> <span style='color:rgba(255,255,255,1)'>=></span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        c
<span class='span_code_line'></span>        <span style='color:rgba(219,112,147,1)'>.Set</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"filter"</span><span style='color:rgba(255,255,255,1)'>, ()</span> <span style='color:rgba(255,255,255,1)'>=></span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            c<span style='color:rgba(219,112,147,1)'>.Set</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"term.type"</span><span style='color:rgba(255,255,255,1)'>,</span> json_post<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>]);
<span class='span_code_line'></span>        })</span>
<span class='span_code_line'></span>        <span style='color:rgba(0,255,0,1)'>// c.Set(str_path, bool, callback) bool -> if true, create this path.</span>
<span class='span_code_line'></span>        <span style='color:rgba(219,112,147,1)'>.Set</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"should"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,255,255,1)'>!</span>json_post<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"names"</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(219,112,147,1)'>.IsNullOrNullValue</span><span style='color:rgba(255,255,255,1)'>(), ()</span> <span style='color:rgba(255,255,255,1)'>=></span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            <span style='color:rgba(0,255,0,1)'>// c.Append(0, 5, 1, (i)=>{ }) => for(int i = 0; i < 5; i+=1) {...}
<span class='span_code_line'></span>            // c.Append(IEnumerable, callback);</span>
<span class='span_code_line'></span>            c<span style='color:rgba(219,112,147,1)'>.Append</span><span style='color:rgba(255,255,255,1)'>(</span>json_post<span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(255,165,0,1)'>"names"</span><span style='color:rgba(255,255,255,1)'>], (</span>item<span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(255,255,255,1)'>=></span> <span style='color:rgba(0,255,0,1)'>// => foreach(var item in json_post) {...}</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                c<span style='color:rgba(219,112,147,1)'>.Set</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"term.name"</span><span style='color:rgba(255,255,255,1)'>,</span> item<span style='color:rgba(255,255,255,1)'>);
<span class='span_code_line'></span>            });
<span class='span_code_line'></span>        });
<span class='span_code_line'></span>    });
<span class='span_code_line'></span>});</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_es_query<span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"from"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"size"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>10</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"query"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"bool"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"filter"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"term"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"type"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"student"</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>            },</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"should"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>                {</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"term"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"DebugST"</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>                },
<span class='span_code_line'></span>                {</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"term"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"None"</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>                }
<span class='span_code_line'></span>            ]
<span class='span_code_line'></span>        }
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>}</span></pre>
</div>
<p>You can see that the <span class='mark'>ES</span> database query syntax is easily constructed from the <span class='mark'>POST</span> request, and the <span class='mark'>Json</span> data structure remains consistent. Multiple overloads are provided in <span class='mark'>Set</span> and <span class='mark'>Append</span> to make the logic more convenient, but of course they are just convenient syntax. The same can be achieved with <span class='mark'>if</span> and <span class='mark'>for</span>.</p>
<div><h2 class='h_option anchor_point' name='b_s'>Callback</h2></div>
<p>With the <span class='mark'>Set</span> above are we able to add a <span class='mark'>coding</span> to each of the hobbies in <span class='mark'>json_src</span>? It doesn't seem possible. After all, adding data to <span class='mark'>hobby</span> requires <span class='mark'>append</span> not <span class='mark'>set</span>.</p>
<p>Of course there is not no way around it.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span>json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"*.hobby"</span><span style='color:rgba(255,255,255,1)'>, (</span>p<span style='color:rgba(255,255,255,1)'>,</span> j<span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(255,255,255,1)'>=></span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    j<span style='color:rgba(219,112,147,1)'>.Append</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"coding"</span><span style='color:rgba(255,255,255,1)'>);
<span class='span_code_line'></span>});</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"cooking"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"sing"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"coding"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    },</span>
<span class='span_code_line'></span>    ...
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<p>Two kinds of callback functions are supported in <span class='mark'>Select</span>, one requires a return value and the other does not, as in the above. And the following one with return value.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json <span style='color:rgba(255,255,255,1)'>=</span> json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"*.hobby.*"</span><span style='color:rgba(255,255,255,1)'>, (</span>p<span style='color:rgba(255,255,255,1)'>,</span> j<span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(255,255,255,1)'>=></span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>return new</span> <span style='color:rgba(0,255,255,1)'>STJsonPathCallBackResult</span><span style='color:rgba(255,255,255,1)'>() {</span>
<span class='span_code_line'></span>        Selected <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,</span>            <span style='color:rgba(0,255,0,1)'>// If or not to add this json to the result.</span>
<span class='span_code_line'></span>        Json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>()</span>         <span style='color:rgba(0,255,0,1)'>// The json that needs to be added to the result.</span>
<span class='span_code_line'></span>            <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"path"</span><span style='color:rgba(255,255,255,1)'>,</span> p<span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>            <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"item"</span><span style='color:rgba(255,255,255,1)'>,</span> j<span style='color:rgba(112,128,144,1)'>.Value</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>()</span><span style='color:rgba(219,112,147,1)'>.ToUpper</span><span style='color:rgba(255,255,255,1)'>())
<span class='span_code_line'></span>    };
<span class='span_code_line'></span>});</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json<span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"path"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>0</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"item"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"COOKING"</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>},</span>
<span class='span_code_line'></span>    ...
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='b_t'>PathItem</h2></div>
<p>There is a rather special data structure in <span class='mark'>STJsonPath</span>.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span>[
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"path"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            ...
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"item"</span><span style='color:rgba(255,255,255,1)'>:</span> ...
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>},</span>
<span class='span_code_line'></span>    ...
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<p>Its structure can be restored by <span class='mark'>RestorePathJson()</span>.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json <span style='color:rgba(255,255,255,1)'>=</span> json_src<span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"*.hobby.*"</span><span style='color:rgba(255,255,255,1)'>, (</span>p<span style='color:rgba(255,255,255,1)'>,</span> j<span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(255,255,255,1)'>=></span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>return new</span> <span style='color:rgba(0,255,255,1)'>STJsonPathCallBackResult</span><span style='color:rgba(255,255,255,1)'>() {</span>
<span class='span_code_line'></span>        Selected <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        Json <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(255,255,255,1)'>()</span>
<span class='span_code_line'></span>            <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"path"</span><span style='color:rgba(255,255,255,1)'>,</span> p<span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>            <span style='color:rgba(219,112,147,1)'>.SetItem</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"item"</span><span style='color:rgba(255,255,255,1)'>,</span> j<span style='color:rgba(112,128,144,1)'>.Value</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>()</span><span style='color:rgba(219,112,147,1)'>.ToUpper</span><span style='color:rgba(255,255,255,1)'>())
<span class='span_code_line'></span>    };
<span class='span_code_line'></span>});</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>STJsonPath</span><span style='color:rgba(219,112,147,1)'>.RestorePathJson</span><span style='color:rgba(255,255,255,1)'>(</span>json<span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"COOKING"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"SING"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }, {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"GAME"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"DANCE"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }, {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"DRAW"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"SING"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }, {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"SING"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"DANCE"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"RAP"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"BASKETBALL"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>]</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='b_u'>Clone</h2></div>
<p>If you want to add <span class='mark'>coding</span> to all user hobbies. but don't want to affect the source data, then you can clone a copy of the data for the operation.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span>json_src<span style='color:rgba(219,112,147,1)'>.Clone</span><span style='color:rgba(255,255,255,1)'>()</span><span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"*.hobby"</span><span style='color:rgba(255,255,255,1)'>, (</span>p<span style='color:rgba(255,255,255,1)'>,</span> j<span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(255,255,255,1)'>=></span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    j<span style='color:rgba(219,112,147,1)'>.Append</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"coding"</span><span style='color:rgba(255,255,255,1)'>);
<span class='span_code_line'></span>});</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"cooking"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"sing"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    },</span>
<span class='span_code_line'></span>    ...
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<h1 class='h_title anchor_point' name='b_v'>Aggregation</h1>
<p>There are some extensions built into <span class='mark'>STJson</span> for aggregate operations and simple data processing. Combined with <span class='mark'>STJsonPath</span>, you can do some data manipulation quickly and easily.</p>
<div><h2 class='h_option anchor_point' name='b_w'>sort</h2></div>
<p><span class='mark'>Sort()</span> is used to sort data, internally by <span class='mark'>sorting by subsumption</span>, and <span class='mark'>Sort</span> has several overloads. However, the final version of <span class='mark'>Sort</span> has the following signature, all overloads, and eventually calls this function.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>public static</span> <span style='color:rgba(0,255,255,1)'>STJson</span> <span style='color:rgba(255,0,255,1)'>Sort</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>this</span> STJson <span style='color:rgba(0,255,255,1)'>json</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(100,149,237,1)'>bool</span> is_new_instance<span style='color:rgba(255,255,255,1)'>,</span> STJsonSortCallback callback<span style='color:rgba(255,255,255,1)'>);</span></pre>
</div>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> arr_obj <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(100,149,237,1)'>object</span><span style='color:rgba(255,255,255,1)'>[] {</span> <span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>2</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>5</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>6</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(255,255,255,1)'>{</span> aa <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>"aa"</span> <span style='color:rgba(255,255,255,1)'>} };</span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_objs <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.FromObject</span><span style='color:rgba(255,255,255,1)'>(</span>arr_obj<span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_objs<span style='color:rgba(219,112,147,1)'>.Sort</span><span style='color:rgba(255,255,255,1)'>());</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_objs<span style='color:rgba(219,112,147,1)'>.Sort</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(0,255,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>2</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>5</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>6</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,{</span><span style='color:rgba(255,165,0,1)'>"aa"</span><span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(255,165,0,1)'>"aa"</span><span style='color:rgba(255,255,255,1)'>}]
<span class='span_code_line'></span>[{</span><span style='color:rgba(255,165,0,1)'>"aa"</span><span style='color:rgba(255,255,255,1)'>:</span><span style='color:rgba(255,165,0,1)'>"aa"</span><span style='color:rgba(255,255,255,1)'>},</span><span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>6</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>5</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>2</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<p>Do you wonder why this is the case? But before that why don't you first wonder why you need such an array to sort? As you can see above <span class='mark'>Sort</span> needs a callback function, the <span class='mark'>STJson</span> extension provides two default callback functions which are constructed by the following code:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(30,144,255,1)'>private static</span> <span style='color:rgba(0,255,255,1)'>STJsonSortCallback</span> <span style='color:rgba(255,0,255,1)'>BuildDefaultSortCallback</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(100,149,237,1)'>bool</span> is_desc<span style='color:rgba(255,255,255,1)'>)
<span class='span_code_line'></span>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(30,144,255,1)'>return</span> <span style='color:rgba(255,255,255,1)'>(</span>a<span style='color:rgba(255,255,255,1)'>,</span> b<span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(255,255,255,1)'>=></span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(100,149,237,1)'>int</span> n_ret <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>if</span> <span style='color:rgba(255,255,255,1)'>(</span>a<span style='color:rgba(219,112,147,1)'>.IsNullOrNullValue</span><span style='color:rgba(255,255,255,1)'>()) {</span>
<span class='span_code_line'></span>            n_ret <span style='color:rgba(255,255,255,1)'>= -</span><span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>        }</span> <span style='color:rgba(30,144,255,1)'>else if</span> <span style='color:rgba(255,255,255,1)'>(</span>b<span style='color:rgba(219,112,147,1)'>.IsNullOrNullValue</span><span style='color:rgba(255,255,255,1)'>()) {</span>
<span class='span_code_line'></span>            n_ret <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>        }</span> <span style='color:rgba(30,144,255,1)'>else if</span> <span style='color:rgba(255,255,255,1)'>(</span>a<span style='color:rgba(112,128,144,1)'>.IsNumber</span> <span style='color:rgba(255,255,255,1)'>&amp;</span><span style='color:rgba(255,255,255,1)'>&amp;</span> b<span style='color:rgba(112,128,144,1)'>.IsNumber</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>            n_ret <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>Convert</span><span style='color:rgba(219,112,147,1)'>.ToDouble</span><span style='color:rgba(255,255,255,1)'>(</span>a<span style='color:rgba(112,128,144,1)'>.Value</span><span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(255,255,255,1)'><</span> <span style='color:rgba(0,255,255,1)'>Convert</span><span style='color:rgba(219,112,147,1)'>.ToDouble</span><span style='color:rgba(255,255,255,1)'>(</span>b<span style='color:rgba(112,128,144,1)'>.Value</span><span style='color:rgba(255,255,255,1)'>)</span> <span style='color:rgba(255,255,255,1)'>? -</span><span style='color:rgba(144,238,144,1)'>1</span> <span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>        }</span> <span style='color:rgba(30,144,255,1)'>else if</span> <span style='color:rgba(255,255,255,1)'>(</span>a<span style='color:rgba(112,128,144,1)'>.ValueType</span> <span style='color:rgba(255,255,255,1)'>!=</span> b<span style='color:rgba(112,128,144,1)'>.ValueType</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>            n_ret <span style='color:rgba(255,255,255,1)'>=</span> a<span style='color:rgba(112,128,144,1)'>.ValueType</span> <span style='color:rgba(255,255,255,1)'>-</span> b<span style='color:rgba(112,128,144,1)'>.ValueType</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>        }</span> <span style='color:rgba(30,144,255,1)'>else</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>            <span style='color:rgba(30,144,255,1)'>switch</span> <span style='color:rgba(255,255,255,1)'>(</span>a<span style='color:rgba(112,128,144,1)'>.ValueType</span><span style='color:rgba(255,255,255,1)'>) {</span>
<span class='span_code_line'></span>                <span style='color:rgba(30,144,255,1)'>case</span> <span style='color:rgba(0,255,255,1)'>STJsonValueType</span><span style='color:rgba(112,128,144,1)'>.Boolean</span><span style='color:rgba(255,255,255,1)'>:</span>
<span class='span_code_line'></span>                    n_ret <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(100,149,237,1)'>bool</span><span style='color:rgba(255,255,255,1)'>)</span>b<span style='color:rgba(112,128,144,1)'>.Value</span> <span style='color:rgba(255,255,255,1)'>? -</span><span style='color:rgba(144,238,144,1)'>1</span> <span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>                    <span style='color:rgba(30,144,255,1)'>break</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>                <span style='color:rgba(30,144,255,1)'>case</span> <span style='color:rgba(0,255,255,1)'>STJsonValueType</span><span style='color:rgba(112,128,144,1)'>.Datetime</span><span style='color:rgba(255,255,255,1)'>:</span>
<span class='span_code_line'></span>                    n_ret <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>DateTime</span><span style='color:rgba(255,255,255,1)'>)</span>a<span style='color:rgba(112,128,144,1)'>.Value</span> <span style='color:rgba(255,255,255,1)'><</span> <span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(0,255,255,1)'>DateTime</span><span style='color:rgba(255,255,255,1)'>)</span>b<span style='color:rgba(112,128,144,1)'>.Value</span> <span style='color:rgba(255,255,255,1)'>? -</span><span style='color:rgba(144,238,144,1)'>1</span> <span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>                    <span style='color:rgba(30,144,255,1)'>break</span><span style='color:rgba(255,255,255,1)'>;</span>
<span class='span_code_line'></span>                <span style='color:rgba(30,144,255,1)'>case</span> <span style='color:rgba(0,255,255,1)'>STJsonValueType</span><span style='color:rgba(112,128,144,1)'>.String</span><span style='color:rgba(255,255,255,1)'>:</span>
<span class='span_code_line'></span>                    n_ret <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(100,149,237,1)'>string</span><span style='color:rgba(219,112,147,1)'>.Compare</span><span style='color:rgba(255,255,255,1)'>(</span>a<span style='color:rgba(112,128,144,1)'>.Value</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(),</span> b<span style='color:rgba(112,128,144,1)'>.Value</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>());</span>
<span class='span_code_line'></span>                    <span style='color:rgba(30,144,255,1)'>break</span><span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>            }
<span class='span_code_line'></span>        }</span>
<span class='span_code_line'></span>        <span style='color:rgba(30,144,255,1)'>return</span> is_desc <span style='color:rgba(255,255,255,1)'>? -</span>n_ret <span style='color:rgba(255,255,255,1)'>:</span> n_ret<span style='color:rgba(255,255,255,1)'>;
<span class='span_code_line'></span>    };
<span class='span_code_line'></span>}</span></pre>
</div>
<p>So if you don't have that weird array then everything will work fine. What if you really want to just sort the numbers in it?</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> arr_obj <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(100,149,237,1)'>object</span><span style='color:rgba(255,255,255,1)'>[] {</span> <span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>2</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>5</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>6</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>null</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(255,255,255,1)'>{</span> aa <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(255,165,0,1)'>"aa"</span> <span style='color:rgba(255,255,255,1)'>} };</span>
<span class='span_code_line'></span><span style='color:rgba(100,149,237,1)'>var</span> json_objs <span style='color:rgba(255,255,255,1)'>=</span> <span style='color:rgba(0,255,255,1)'>STJson</span><span style='color:rgba(219,112,147,1)'>.FromObject</span><span style='color:rgba(255,255,255,1)'>(</span>arr_obj<span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"..[?(typeof(@) in ['long', 'double'])]"</span><span style='color:rgba(255,255,255,1)'>);</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_objs<span style='color:rgba(219,112,147,1)'>.Sort</span><span style='color:rgba(255,255,255,1)'>());</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_objs<span style='color:rgba(219,112,147,1)'>.Sort</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span><span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>2</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>5</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>6</span><span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>[</span><span style='color:rgba(144,238,144,1)'>6</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>5</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>2</span><span style='color:rgba(255,255,255,1)'>,</span><span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<p>Sort by <span class='mark'>Path</span>：</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Sort</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>    {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tony"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"game"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"dance"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }, {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"cooking"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"sing"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }, {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Andy"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>20</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"draw"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"sing"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }, {</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>26</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"sing"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"dance"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"rap"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"basketball"</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>]</span></pre>
</div>
<p>Of course you can also specify a descending order:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Sort</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='b_x'>group</h2></div>
<p><span class='mark'>Group()</span> is used to group the data by specifying <span class='mark'>path</span>. It is used in the following way:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Group</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>        {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"items"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>                {</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>                        <span style='color:rgba(255,165,0,1)'>"cooking"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"sing"</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>                }, {</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tony"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>                        <span style='color:rgba(255,165,0,1)'>"game"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"dance"</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>                }
<span class='span_code_line'></span>            ]
<span class='span_code_line'></span>        }, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"items"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>                {</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Andy"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>20</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>                        <span style='color:rgba(255,165,0,1)'>"draw"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"sing"</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>                }, {</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Kun"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>26</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>                        <span style='color:rgba(255,165,0,1)'>"sing"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"dance"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"rap"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"basketball"</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>                }
<span class='span_code_line'></span>            ]
<span class='span_code_line'></span>        }
<span class='span_code_line'></span>    ]</span></pre>
</div>
<p>Similarly you can use multiple <span class='mark'>path</span>s for grouping, but unlike <span class='mark'>Sort</span> these <span class='mark'>path</span>s are not grouping the results of the first <span class='mark'>path</span>. They are juxtaposed, not nested.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Group</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>...<span style='color:rgba(255,255,255,1)'>],</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>...<span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>}</span></pre>
</div>
<p>What should I do if I want to do nested <span class='mark'>Group()</span>? The author does not intend to implement it in <span class='mark'>Group()</span>, because <span class='mark'>STJsonPath</span> can do the job.</p>
<div><h2 class='h_option anchor_point' name='b_y'>terms</h2></div>
<p><span class='mark'>Terms()</span> is similar to aggregation in the <span class='mark'>ElasticSearch</span> database, counting the number of occurrences of a field, and like <span class='mark'>Sort()</span>, it can choose whether to specify <span class='mark'>path</span> or multiple <span class='mark'>paths</span>.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Terms</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>        {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"cooking"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"sing"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>3</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"game"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"dance"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>2</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"draw"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"rap"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"basketball"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    ],</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>        {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>2</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>2</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    ]
<span class='span_code_line'></span>}</span></pre>
</div>
<p>As you can see, it seems that <span class='mark'>hobby</span> doesn't sort <span class='mark'>count</span>? Yes, it does. This is intentional on the author's part.... What? Not convinced? Is it possible that there is actually a role for <span class='mark'>Terms()</span>? There is a <span class='mark'>cardinality</span> in the <span class='mark'>ES</span> database. It is used to count the number of data in a field after it has been de-duplicated.</p>
<p>Is it possible that the author actually wanted to implement a function like this? But halfway through writing this function, the author Deleted it on the spot. There's no need for that. Isn't the <span class='mark'>Terms()</span> above already doing the job? For example:</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span>json_src<span style='color:rgba(219,112,147,1)'>.Terms</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>)[</span><span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>]</span><span style='color:rgba(112,128,144,1)'>.Count</span><span style='color:rgba(255,255,255,1)'>;</span></pre>
</div>
<p>And is there a possibility that <span class='mark'>cardinality</span> only counts the number of individuals. But.... What if you want to get the values of the de-duplicated fields? And it seems that <span class='mark'>Terms()</span> has already been done in all these cases. It's just not sorting. We already have <span class='mark'>Sort()</span> function, and then a separate order is difficult?</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span>json_src<span style='color:rgba(219,112,147,1)'>.Terms</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ForEach</span><span style='color:rgba(255,255,255,1)'>((</span>item<span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(255,255,255,1)'>=></span>item<span style='color:rgba(219,112,147,1)'>.Sort</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>));</span></pre>
</div>
<p>What do I have to do if I want to get the top three most popular hobbies for personnel?</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>
<span class='span_code_line'></span>    json_src<span style='color:rgba(219,112,147,1)'>.Terms</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>)[</span><span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>]</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.Sort</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(30,144,255,1)'>true</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"[0:3]"</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.Select</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"*.value"</span><span style='color:rgba(255,255,255,1)'>)</span>
<span class='span_code_line'></span>    <span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>)
<span class='span_code_line'></span>    );</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>    <span style='color:rgba(0,255,255,1)'>"sing"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"dance"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"basketball"</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>]</span></pre>
</div>
<div><h2 class='h_option anchor_point' name='b_z'>min, max</h2></div>
<p><span class='mark'>Min()</span> <span class='mark'>Max()</span> is to find the minimum and maximum elements, respectively, and can be specified without or with multiple <span class='mark'>path</span>s.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Min</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>,</span>                 <span style='color:rgba(0,255,0,1)'>// Four of these elements are involved in the calculation.</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span>                <span style='color:rgba(0,255,0,1)'>// The minimum age value is 16.</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"items"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>                  <span style='color:rgba(0,255,0,1)'>// The element that satisfies the minimum value.</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tom"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"cooking"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"sing"</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>            }, {</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"name"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"Tony"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>16</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"gender"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>0</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,165,0,1)'>"hobby"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[</span>
<span class='span_code_line'></span>                    <span style='color:rgba(255,165,0,1)'>"game"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"dance"</span>
<span class='span_code_line'></span>                <span style='color:rgba(255,255,255,1)'>]
<span class='span_code_line'></span>            }
<span class='span_code_line'></span>        ]
<span class='span_code_line'></span>    }
<span class='span_code_line'></span>}</span></pre>
</div>
<p>In fact, the effect above is a bit like <span class='mark'>Group</span> a bit like that, plus a <span class='mark'>Sort()</span>. It's almost exactly the same. Even the author himself is confused. We should have used <span class='mark'>Group()</span> + <span class='mark'>Sort()</span> inside <span class='mark'>Min/Max()</span> to achieve this. Forget about it. The code is written. But it is clear that <span class='mark'>Sort()</span> will certainly reduce efficiency. But then again. The small amount of data does not care about efficiency. But what about big data? Big data volume you give me that you use <span class='mark'>Json</span> array to save ？？？？ Are you sick?</p>
<div><h2 class='h_option anchor_point' name='c_a'>avg, sum</h2></div>
<p><span class='mark'>Avg()</span> <span class='mark'>Sum()</span> is used to calculate the average and the summary, respectively, and can be unspecified or specify multiple <span class='mark'>keys</span>.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Avg</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"age"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>,</span>         <span style='color:rgba(0,255,0,1)'>// Four of these elements are involved in the calculation.</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>19</span><span style='color:rgba(112,128,144,1)'>.</span><span style='color:rgba(144,238,144,1)'>5</span>       <span style='color:rgba(0,255,0,1)'>// avg is 19.5</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>}</span></pre>
</div>
<p>The return value of <span class='mark'>Sum()</span> is the same as <span class='mark'>Avg()</span>, the only difference is that <span class='mark'>value</span> is an average and a summary.</p>
<div><h2 class='h_option anchor_point' name='c_b'>STJsonPath.Name</h2></div>
<p>In the above demo, we have specified a field for data manipulation, and the resulting <span class='mark'>json</span> will output the field name as a <span class='mark'>key</span>. But the above does not emphasize that the operation is performed on the specified <span class='mark'>key</span>, but on the <span class='mark'>path</span>. It's just that the path is simpler to make it look like <span class='mark'>key</span> to us.</p>
<p>What if aggregation is done this way?</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Terms</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"hobby[0]"</span><span style='color:rgba(255,255,255,1)'>)</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"hobby[0]"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>        {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"cooking"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"game"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"draw"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"sing"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    ]
<span class='span_code_line'></span>}</span></pre>
</div>
<p>It seems like it looks strange. Actually <span class='mark'>STJsonPath</span> has a <span class='mark'>Name</span> property.</p>
<div class='div_code'>
<pre class='pre_code'><span class='span_code_line'></span><span style='color:rgba(0,255,255,1)'>Console</span><span style='color:rgba(219,112,147,1)'>.WriteLine</span><span style='color:rgba(255,255,255,1)'>(</span>json_src<span style='color:rgba(219,112,147,1)'>.Terms</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(30,144,255,1)'>new</span> <span style='color:rgba(0,255,255,1)'>STJsonPath</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(255,165,0,1)'>"test"</span><span style='color:rgba(255,255,255,1)'>,</span> <span style='color:rgba(255,165,0,1)'>"hobby[0]"</span><span style='color:rgba(255,255,255,1)'>))</span><span style='color:rgba(219,112,147,1)'>.ToString</span><span style='color:rgba(255,255,255,1)'>(</span><span style='color:rgba(144,238,144,1)'>4</span><span style='color:rgba(255,255,255,1)'>));</span>
<span class='span_code_line'></span><span style='color:rgba(0,255,0,1)'>/*******************************************************************************
<span class='span_code_line'></span> *                                [output]                                     *
<span class='span_code_line'></span> *******************************************************************************/</span>
<span class='span_code_line'></span><span style='color:rgba(255,255,255,1)'>{</span>
<span class='span_code_line'></span>    <span style='color:rgba(255,165,0,1)'>"test"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,255,255,1)'>[
<span class='span_code_line'></span>        {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"cooking"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"game"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"draw"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}, {</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"value"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(255,165,0,1)'>"sing"</span><span style='color:rgba(255,255,255,1)'>,</span>
<span class='span_code_line'></span>            <span style='color:rgba(255,165,0,1)'>"count"</span><span style='color:rgba(255,255,255,1)'>:</span> <span style='color:rgba(144,238,144,1)'>1</span>
<span class='span_code_line'></span>        <span style='color:rgba(255,255,255,1)'>}
<span class='span_code_line'></span>    ]
<span class='span_code_line'></span>}</span></pre>
</div>
<h1 class='h_title anchor_point' name='c_c'>The END</h1>
<p>Finally, thank you so damn much for seeing it through to the end, the author is about to go crazy writing it. If you encounter any problems during the use, please inform the author in time if you can. The author will certainly be very promptly recorded, as to change or not ...... We'll talk about it later.</p>
<div class='div_hightlight' style='background-color:black;color:white'>
<ul>
<li>TG: DebugST</li>
<li>QQ: 2212233137</li>
<li>Mail: 2212233137@qq.com</li>
</ul>
</div>

</div>
<div id="div_right_list">
<a name='a_a' href='#a_a'>STLib.Json</a>
<a name='a_b' href='#a_b'>Introduction</a>
<a name='a_c' href='#a_c'>The question of Path</a>
<a name='a_d' href='#a_d'>The question of expression</a>
<a name='a_e' href='#a_e'>STJson API</a>
<a name='a_f' href='#a_f'>Data type</a>
<a name='a_g' href='#a_g'>Static methods</a>
<a name='a_h' href='#a_h'>Non-Static methods</a>
<a name='a_i' href='#a_i'>Extensions methods</a>
<a name='a_j' href='#a_j'>Fields</a>
<a name='a_k' href='#a_k'>Indexer</a>
<a name='a_l' href='#a_l'>Other object</a>
<a name='a_m' href='#a_m'>STJson [Basic]</a>
<a name='a_n' href='#a_n'>object -&gt; string</a>
<a name='a_o' href='#a_o'>string -&gt; object</a>
<a name='a_p' href='#a_p'>STJson -&gt; object</a>
<a name='a_q' href='#a_q'>STJsonConverter</a>
<a name='a_r' href='#a_r'>STJsonAttribute</a>
<a name='a_s' href='#a_s'>STJsonSetting</a>
<a name='a_t' href='#a_t'>JSON5</a>
<a name='a_u' href='#a_u'>STJsonReader</a>
<a name='a_v' href='#a_v'>STJsonWriter</a>
<a name='a_w' href='#a_w'>json_src [Important]</a>
<a name='a_x' href='#a_x'>STJsonPath</a>
<a name='a_y' href='#a_y'>Selector</a>
<a name='a_z' href='#a_z'>How to use</a>
<a name='b_a' href='#b_a'>Wildcard character</a>
<a name='b_b' href='#b_b'>Depth selector</a>
<a name='b_c' href='#b_c'>List selector</a>
<a name='b_d' href='#b_d'>Slice selector</a>
<a name='b_e' href='#b_e'>Expression</a>
<a name='b_f' href='#b_f'>Filter expression</a>
<a name='b_g' href='#b_g'>General expression</a>
<a name='b_h' href='#b_h'>Test expression</a>
<a name='b_i' href='#b_i'>Build-In functions</a>
<a name='b_j' href='#b_j'>Build-In functions list</a>
<a name='b_k' href='#b_k'>Custom functions</a>
<a name='b_l' href='#b_l'>Selectors in expressions</a>
<a name='b_m' href='#b_m'>Select mode</a>
<a name='b_n' href='#b_n'>ParsedTokens</a>
<a name='b_o' href='#b_o'>STJson [Advanced]</a>
<a name='b_p' href='#b_p'>Get value</a>
<a name='b_q' href='#b_q'>Set value</a>
<a name='b_r' href='#b_r'>STJsonCreator</a>
<a name='b_s' href='#b_s'>Callback</a>
<a name='b_t' href='#b_t'>PathItem</a>
<a name='b_u' href='#b_u'>Clone</a>
<a name='b_v' href='#b_v'>Aggregation</a>
<a name='b_w' href='#b_w'>sort</a>
<a name='b_x' href='#b_x'>group</a>
<a name='b_y' href='#b_y'>terms</a>
<a name='b_z' href='#b_z'>min, max</a>
<a name='c_a' href='#c_a'>avg, sum</a>
<a name='c_b' href='#c_b'>STJsonPath.Name</a>
<a name='c_c' href='#c_c'>The END</a>
</div>
</div>
</body>
</html>
